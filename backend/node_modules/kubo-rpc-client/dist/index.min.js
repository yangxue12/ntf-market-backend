(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.KuboRpcClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var KuboRpcClient=(()=>{var Gh=Object.create;var Jr=Object.defineProperty;var Wh=Object.getOwnPropertyDescriptor;var Jh=Object.getOwnPropertyNames;var Kh=Object.getPrototypeOf,Xh=Object.prototype.hasOwnProperty;var $i=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),D=(e,t)=>{for(var r in t)Jr(e,r,{get:t[r],enumerable:!0})},ji=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Jh(t))!Xh.call(e,o)&&o!==r&&Jr(e,o,{get:()=>t[o],enumerable:!(n=Wh(t,o))||n.enumerable});return e};var R=(e,t,r)=>(r=e!=null?Gh(Kh(e)):{},ji(t||!e||!e.__esModule?Jr(r,"default",{value:e,enumerable:!0}):r,e)),Qh=e=>ji(Jr({},"__esModule",{value:!0}),e);var wu=P((ZE,yu)=>{function db(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}yu.exports=db});var _s=P((YE,bu)=>{"use strict";var hb=wu(),xn=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,Pr=hb(),mb=xn&&!Pr,gb=Pr&&!xn,yb=Pr&&xn,wb=typeof $i=="function"&&typeof process<"u"&&typeof process.release<"u"&&process.release.name==="node"&&!Pr,bb=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,xb=typeof process<"u"&&typeof process.env<"u"&&!1,Sb=typeof navigator<"u"&&navigator.product==="ReactNative";bu.exports={isTest:xb,isElectron:Pr,isElectronMain:gb,isElectronRenderer:yb,isNode:wb,isBrowser:mb,isWebWorker:bb,isEnvWithDom:xn,isReactNative:Sb}});var vu=P((r4,Eu)=>{var Jt=1e3,Kt=Jt*60,Xt=Kt*60,wt=Xt*24,vb=wt*7,Tb=wt*365.25;Eu.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Ab(e);if(r==="number"&&isFinite(e))return t.long?Cb(e):Pb(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Ab(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Tb;case"weeks":case"week":case"w":return r*vb;case"days":case"day":case"d":return r*wt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Xt;case"minutes":case"minute":case"mins":case"min":case"m":return r*Kt;case"seconds":case"second":case"secs":case"sec":case"s":return r*Jt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Pb(e){var t=Math.abs(e);return t>=wt?Math.round(e/wt)+"d":t>=Xt?Math.round(e/Xt)+"h":t>=Kt?Math.round(e/Kt)+"m":t>=Jt?Math.round(e/Jt)+"s":e+"ms"}function Cb(e){var t=Math.abs(e);return t>=wt?Sn(e,t,wt,"day"):t>=Xt?Sn(e,t,Xt,"hour"):t>=Kt?Sn(e,t,Kt,"minute"):t>=Jt?Sn(e,t,Jt,"second"):e+" ms"}function Sn(e,t,r,n){var o=t>=r*1.5;return Math.round(e/r)+" "+n+(o?"s":"")}});var Au=P((n4,Tu)=>{function Ib(e){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=o,r.enabled=i,r.humanize=vu(),r.destroy=u,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let m=0;for(let x=0;x<d.length;x++)m=(m<<5)-m+d.charCodeAt(x),m|=0;return r.colors[Math.abs(m)%r.colors.length]}r.selectColor=t;function r(d){let m,x=null,S,w;function A(...B){if(!A.enabled)return;let N=A,z=Number(new Date),M=z-(m||z);N.diff=M,N.prev=m,N.curr=z,m=z,B[0]=r.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");let _=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,(Q,$)=>{if(Q==="%%")return"%";_++;let W=r.formatters[$];if(typeof W=="function"){let Ie=B[_];Q=W.call(N,Ie),B.splice(_,1),_--}return Q}),r.formatArgs.call(N,B),(N.log||r.log).apply(N,B)}return A.namespace=d,A.useColors=r.useColors(),A.color=r.selectColor(d),A.extend=n,A.destroy=r.destroy,Object.defineProperty(A,"enabled",{enumerable:!0,configurable:!1,get:()=>x!==null?x:(S!==r.namespaces&&(S=r.namespaces,w=r.enabled(d)),w),set:B=>{x=B}}),typeof r.init=="function"&&r.init(A),A}function n(d,m){let x=r(this.namespace+(typeof m>"u"?":":m)+d);return x.log=this.log,x}function o(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let m,x=(typeof d=="string"?d:"").split(/[\s,]+/),S=x.length;for(m=0;m<S;m++)x[m]&&(d=x[m].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function s(){let d=[...r.names.map(a),...r.skips.map(a).map(m=>"-"+m)].join(",");return r.enable(""),d}function i(d){if(d[d.length-1]==="*")return!0;let m,x;for(m=0,x=r.skips.length;m<x;m++)if(r.skips[m].test(d))return!1;for(m=0,x=r.names.length;m<x;m++)if(r.names[m].test(d))return!0;return!1}function a(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Tu.exports=Ib});var Pu=P((we,En)=>{we.formatArgs=kb;we.save=Bb;we.load=Nb;we.useColors=Ub;we.storage=Db();we.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();we.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ub(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function kb(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+En.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}we.log=console.debug||console.log||(()=>{});function Bb(e){try{e?we.storage.setItem("debug",e):we.storage.removeItem("debug")}catch{}}function Nb(){let e;try{e=we.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Db(){try{return localStorage}catch{}}En.exports=Au()(we);var{formatters:_b}=En.exports;_b.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Fs=P(Tn=>{"use strict";var Rs=class extends Error{constructor(t="Request timed out"){super(t),this.name="TimeoutError"}};Tn.TimeoutError=Rs;var Os=class extends Error{constructor(t="The operation was aborted."){super(t),this.name="AbortError"}};Tn.AbortError=Os;var Ls=class extends Error{constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}};Tn.HTTPError=Ls});var Cr=P(()=>{});var Cu=P((l4,zs)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?zs.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:zs.exports={default:Cr().default,Headers:Cr().Headers,Request:Cr().Request,Response:Cr().Response}});var Uu=P((p4,Iu)=>{"use strict";Iu.exports=Cu()});var Nu=P((d4,Bu)=>{"use strict";var{TimeoutError:Rb,AbortError:Ob}=Fs(),{Response:ku,Request:Lb,Headers:js,default:Fb}=Uu(),zb=(e,t={})=>{let r=new XMLHttpRequest;r.open(t.method||"GET",e.toString(),!0);let{timeout:n,headers:o}=t;if(n&&n>0&&n<1/0&&(r.timeout=n),t.overrideMimeType!=null&&r.overrideMimeType(t.overrideMimeType),o)for(let[s,i]of new js(o))r.setRequestHeader(s,i);return t.signal&&(t.signal.onabort=()=>r.abort()),t.onUploadProgress&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((s,i)=>{let a=c=>{switch(c.type){case"error":{s(ku.error());break}case"load":{s(new $s(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:Mb(r.getAllResponseHeaders())}));break}case"timeout":{i(new Rb);break}case"abort":{i(new Ob);break}default:break}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(t.body)})},$b=Fb,jb=(e,t={})=>t.onUploadProgress!=null?zb(e,t):$b(e,t),Mb=e=>{let t=new js;for(let r of e.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&t.set(r.slice(0,n),r.slice(n+1))}return t},$s=class extends ku{constructor(t,r,n){super(r,n),Object.defineProperty(this,"url",{value:t})}};Bu.exports={fetch:jb,Request:Lb,Headers:js}});var _u=P((h4,Du)=>{"use strict";Du.exports=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}});var Vs=P((Fu,zu)=>{"use strict";var An=_u(),{hasOwnProperty:Ou}=Object.prototype,{propertyIsEnumerable:Vb}=Object,Qt=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),qb=Fu,Ru={concatArrays:!1,ignoreUndefined:!1},Pn=e=>{let t=[];for(let r in e)Ou.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(e);for(let n of r)Vb.call(e,n)&&t.push(n)}return t};function Zt(e){return Array.isArray(e)?Hb(e):An(e)?Gb(e):e}function Hb(e){let t=e.slice(0,0);return Pn(e).forEach(r=>{Qt(t,r,Zt(e[r]))}),t}function Gb(e){let t=Object.getPrototypeOf(e)===null?Object.create(null):{};return Pn(e).forEach(r=>{Qt(t,r,Zt(e[r]))}),t}var Lu=(e,t,r,n)=>(r.forEach(o=>{typeof t[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?Qt(e,o,Ms(e[o],t[o],n)):Qt(e,o,Zt(t[o])))}),e),Wb=(e,t,r)=>{let n=e.slice(0,0),o=0;return[e,t].forEach(s=>{let i=[];for(let a=0;a<s.length;a++)Ou.call(s,a)&&(i.push(String(a)),s===e?Qt(n,o++,s[a]):Qt(n,o++,Zt(s[a])));n=Lu(n,s,Pn(s).filter(a=>!i.includes(a)),r)}),n};function Ms(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?Wb(e,t,r):!An(t)||!An(e)?Zt(t):Lu(e,t,Pn(t),r)}zu.exports=function(...e){let t=Ms(Zt(Ru),this!==qb&&this||{},Ru),r={_:{}};for(let n of e)if(n!==void 0){if(!An(n))throw new TypeError("`"+n+"` is not an Option Object");r=Ms(r,{_:n},t)}return r._}});var Hs=P((m4,ju)=>{"use strict";var Jb=typeof navigator<"u"&&navigator.product==="ReactNative";function Kb(){return Jb?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var Ir=self.URL,$u=Kb(),qs=class{constructor(t="",r=$u){this.super=new Ir(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set username(t){this.super.username=t}static createObjectURL(t){return Ir.createObjectURL(t)}static revokeObjectURL(t){Ir.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Xb(e){if(typeof e=="string")return new Ir(e).toString();if(!(e instanceof Ir)){let t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",s=e.host||"",i=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",d=e.path||u+a;return`${o}${t||r}${s||i+n}${d}${c}`}}ju.exports={URLWithLegacySupport:qs,URLSearchParams:self.URLSearchParams,defaultBase:$u,format:Xb}});var qu=P((g4,Vu)=>{"use strict";var{URLWithLegacySupport:Mu,format:Qb}=Hs();Vu.exports=(e,t={},r={},n)=>{let o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let s;try{s=new Mu(e)}catch{s={}}let i=Object.assign({},t,{protocol:o||s.protocol,host:t.host||s.host});return new Mu(e,Qb(i)).toString()}});var Gu=P((y4,Hu)=>{"use strict";var{URLWithLegacySupport:Zb,format:Yb,URLSearchParams:e0,defaultBase:t0}=Hs(),r0=qu();Hu.exports={URL:Zb,URLSearchParams:e0,format:Yb,relative:r0,defaultBase:t0}});var Ws=P((w4,Gs)=>{function Wu(e){let t=new globalThis.AbortController;function r(){t.abort();for(let n of e)!n||!n.removeEventListener||n.removeEventListener("abort",r)}for(let n of e)if(!(!n||!n.addEventListener)){if(n.aborted){r();break}n.addEventListener("abort",r)}return t.signal}Gs.exports=Wu;Gs.exports.anySignal=Wu});var Ku=P((b4,Ju)=>{"use strict";async function*n0(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&r.cancel(),r.releaseLock()}}Ju.exports=n0});var Qu=P((x4,Xu)=>{"use strict";var o0=async e=>{let t=[];for await(let r of e)t.push(r);return t};Xu.exports=o0});var Cn=P((S4,nf)=>{"use strict";var{fetch:s0,Request:i0,Headers:a0}=Nu(),{TimeoutError:Js,HTTPError:tf}=Fs(),Zu=Vs().bind({ignoreUndefined:!0}),{URL:Yu,URLSearchParams:ef}=Gu(),c0=Ws(),u0=Ku(),{isBrowser:f0,isWebWorker:l0}=_s(),p0=Qu(),d0=(e,t,r)=>{if(t===void 0)return e;let n=Date.now(),o=()=>Date.now()-n>=t;return new Promise((s,i)=>{let a=setTimeout(()=>{o()&&(i(new Js),r.abort())},t),c=u=>m=>{if(clearTimeout(a),o()){i(new Js);return}u(m)};e.then(c(s),c(i))})},h0={throwHttpErrors:!0,credentials:"same-origin"},ce=class{constructor(t={}){this.opts=Zu(h0,t)}async fetch(t,r={}){let n=Zu(this.opts,r),o=new a0(n.headers);if(typeof t!="string"&&!(t instanceof Yu||t instanceof i0))throw new TypeError("`resource` must be a string, URL, or Request");let s=new Yu(t.toString(),n.base),{searchParams:i,transformSearchParams:a,json:c}=n;i&&(typeof a=="function"?s.search=a(new ef(n.searchParams)):s.search=new ef(n.searchParams)),c&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));let u=new AbortController,d=c0([u.signal,n.signal]);globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(f0||l0)&&(n.body=new Blob(await p0(u0(n.body))));let m=await d0(s0(s.toString(),{...n,signal:d,timeout:void 0,headers:o,duplex:"half"}),n.timeout,u);if(!m.ok&&n.throwHttpErrors)throw n.handleError&&await n.handleError(m),new tf(m);return m.iterator=async function*(){yield*rf(m.body)},m.ndjson=async function*(){for await(let x of m0(m.iterator()))r.transform?yield r.transform(x):yield x},m}post(t,r={}){return this.fetch(t,{...r,method:"POST"})}get(t,r={}){return this.fetch(t,{...r,method:"GET"})}put(t,r={}){return this.fetch(t,{...r,method:"PUT"})}delete(t,r={}){return this.fetch(t,{...r,method:"DELETE"})}options(t,r={}){return this.fetch(t,{...r,method:"OPTIONS"})}},m0=async function*(e){let t=new TextDecoder,r="";for await(let n of e){r+=t.decode(n,{stream:!0});let o=r.split(/\r?\n/);for(let s=0;s<o.length-1;s++){let i=o[s].trim();i.length>0&&(yield JSON.parse(i))}r=o[o.length-1]}r+=t.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},rf=e=>{if(g0(e))return e;if(w0(e)){let t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(r){return e.destroy(),typeof t.return=="function"?t.return():Promise.resolve({done:!0,value:r})}}}}}if(y0(e)){let t=e.getReader();return async function*(){try{for(;;){let{done:r,value:n}=await t.read();if(r)return;n&&(yield n)}}finally{t.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},g0=e=>typeof e=="object"&&e!==null&&typeof e[Symbol.asyncIterator]=="function",y0=e=>e&&typeof e.getReader=="function",w0=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");ce.HTTPError=tf;ce.TimeoutError=Js;ce.streamToAsyncIterator=rf;ce.post=(e,t)=>new ce(t).post(e,t);ce.get=(e,t)=>new ce(t).get(e,t);ce.put=(e,t)=>new ce(t).put(e,t);ce.delete=(e,t)=>new ce(t).delete(e,t);ce.options=(e,t)=>new ce(t).options(e,t);nf.exports=ce});var lf=P((C4,ff)=>{ff.exports=Qs;var uf=128,v0=127,T0=~v0,A0=Math.pow(2,31);function Qs(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw Qs.bytes=0,new RangeError("Could not encode varint");t=t||[],r=r||0;for(var n=r;e>=A0;)t[r++]=e&255|uf,e/=128;for(;e&T0;)t[r++]=e&255|uf,e>>>=7;return t[r]=e|0,Qs.bytes=r-n+1,t}});var hf=P((I4,df)=>{df.exports=Zs;var P0=128,pf=127;function Zs(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a||o>49)throw Zs.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&pf)<<o:(i&pf)*Math.pow(2,o),o+=7}while(i>=P0);return Zs.bytes=s-n,r}});var gf=P((U4,mf)=>{var C0=Math.pow(2,7),I0=Math.pow(2,14),U0=Math.pow(2,21),k0=Math.pow(2,28),B0=Math.pow(2,35),N0=Math.pow(2,42),D0=Math.pow(2,49),_0=Math.pow(2,56),R0=Math.pow(2,63);mf.exports=function(e){return e<C0?1:e<I0?2:e<U0?3:e<k0?4:e<B0?5:e<N0?6:e<D0?7:e<_0?8:e<R0?9:10}});var bt=P((k4,yf)=>{yf.exports={encode:lf(),decode:hf(),encodingLength:gf()}});var ue=P((q4,If)=>{"use strict";function Cf(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function X0(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return Cf(e,r)}catch{r.message=e.message,r.stack=e.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),Cf(new o,r)}}If.exports=X0});var ll=P((Pv,fl)=>{"use strict";fl.exports=F1;function F1(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,s=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(a,c){r[n]=function(d){if(s)if(s=!1,d)c(d);else{for(var m=new Array(arguments.length-1),x=0;x<m.length;)m[x++]=arguments[x];a.apply(null,m)}};try{e.apply(t||null,r)}catch(u){s&&(s=!1,c(u))}})}});var ml=P(hl=>{"use strict";var zn=hl;zn.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var or=new Array(64),dl=new Array(123);for(De=0;De<64;)dl[or[De]=De<26?De+65:De<52?De+71:De<62?De-4:De-59|43]=De++;var De;zn.encode=function(t,r,n){for(var o=null,s=[],i=0,a=0,c;r<n;){var u=t[r++];switch(a){case 0:s[i++]=or[u>>2],c=(u&3)<<4,a=1;break;case 1:s[i++]=or[c|u>>4],c=(u&15)<<2,a=2;break;case 2:s[i++]=or[c|u>>6],s[i++]=or[u&63],a=0;break}i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0)}return a&&(s[i++]=or[c],s[i++]=61,a===1&&(s[i++]=61)),o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))};var pl="invalid encoding";zn.decode=function(t,r,n){for(var o=n,s=0,i,a=0;a<t.length;){var c=t.charCodeAt(a++);if(c===61&&s>1)break;if((c=dl[c])===void 0)throw Error(pl);switch(s){case 0:i=c,s=1;break;case 1:r[n++]=i<<2|(c&48)>>4,i=c,s=2;break;case 2:r[n++]=(i&15)<<4|(c&60)>>2,i=c,s=3;break;case 3:r[n++]=(i&3)<<6|c,s=0;break}}if(s===1)throw Error(pl);return n-o};zn.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var yl=P((Iv,gl)=>{"use strict";gl.exports=$n;function $n(){this._listeners={}}$n.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};$n.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],o=0;o<n.length;)n[o].fn===r?n.splice(o,1):++o;return this};$n.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],o=1;o<arguments.length;)n.push(arguments[o++]);for(o=0;o<r.length;)r[o].fn.apply(r[o++].ctx,n)}return this}});var Tl=P((Uv,vl)=>{"use strict";vl.exports=wl(wl);function wl(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function o(c,u,d){t[0]=c,u[d]=r[0],u[d+1]=r[1],u[d+2]=r[2],u[d+3]=r[3]}function s(c,u,d){t[0]=c,u[d]=r[3],u[d+1]=r[2],u[d+2]=r[1],u[d+3]=r[0]}e.writeFloatLE=n?o:s,e.writeFloatBE=n?s:o;function i(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],t[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],t[0]}e.readFloatLE=n?i:a,e.readFloatBE=n?a:i}():function(){function t(n,o,s,i){var a=o<0?1:0;if(a&&(o=-o),o===0)n(1/o>0?0:2147483648,s,i);else if(isNaN(o))n(2143289344,s,i);else if(o>34028234663852886e22)n((a<<31|2139095040)>>>0,s,i);else if(o<11754943508222875e-54)n((a<<31|Math.round(o/1401298464324817e-60))>>>0,s,i);else{var c=Math.floor(Math.log(o)/Math.LN2),u=Math.round(o*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|u)>>>0,s,i)}}e.writeFloatLE=t.bind(null,bl),e.writeFloatBE=t.bind(null,xl);function r(n,o,s){var i=n(o,s),a=(i>>31)*2+1,c=i>>>23&255,u=i&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}e.readFloatLE=r.bind(null,Sl),e.readFloatBE=r.bind(null,El)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function o(c,u,d){t[0]=c,u[d]=r[0],u[d+1]=r[1],u[d+2]=r[2],u[d+3]=r[3],u[d+4]=r[4],u[d+5]=r[5],u[d+6]=r[6],u[d+7]=r[7]}function s(c,u,d){t[0]=c,u[d]=r[7],u[d+1]=r[6],u[d+2]=r[5],u[d+3]=r[4],u[d+4]=r[3],u[d+5]=r[2],u[d+6]=r[1],u[d+7]=r[0]}e.writeDoubleLE=n?o:s,e.writeDoubleBE=n?s:o;function i(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],t[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],t[0]}e.readDoubleLE=n?i:a,e.readDoubleBE=n?a:i}():function(){function t(n,o,s,i,a,c){var u=i<0?1:0;if(u&&(i=-i),i===0)n(0,a,c+o),n(1/i>0?0:2147483648,a,c+s);else if(isNaN(i))n(0,a,c+o),n(2146959360,a,c+s);else if(i>17976931348623157e292)n(0,a,c+o),n((u<<31|2146435072)>>>0,a,c+s);else{var d;if(i<22250738585072014e-324)d=i/5e-324,n(d>>>0,a,c+o),n((u<<31|d/4294967296)>>>0,a,c+s);else{var m=Math.floor(Math.log(i)/Math.LN2);m===1024&&(m=1023),d=i*Math.pow(2,-m),n(d*4503599627370496>>>0,a,c+o),n((u<<31|m+1023<<20|d*1048576&1048575)>>>0,a,c+s)}}}e.writeDoubleLE=t.bind(null,bl,0,4),e.writeDoubleBE=t.bind(null,xl,4,0);function r(n,o,s,i,a){var c=n(i,a+o),u=n(i,a+s),d=(u>>31)*2+1,m=u>>>20&2047,x=4294967296*(u&1048575)+c;return m===2047?x?NaN:d*(1/0):m===0?d*5e-324*x:d*Math.pow(2,m-1075)*(x+4503599627370496)}e.readDoubleLE=r.bind(null,Sl,0,4),e.readDoubleBE=r.bind(null,El,4,0)}(),e}function bl(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function xl(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function Sl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function El(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var Al=P((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var Cl=P(Pl=>{"use strict";var xi=Pl;xi.length=function(t){for(var r=0,n=0,o=0;o<t.length;++o)n=t.charCodeAt(o),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(t.charCodeAt(o+1)&64512)===56320?(++o,r+=4):r+=3;return r};xi.read=function(t,r,n){var o=n-r;if(o<1)return"";for(var s=null,i=[],a=0,c;r<n;)c=t[r++],c<128?i[a++]=c:c>191&&c<224?i[a++]=(c&31)<<6|t[r++]&63:c>239&&c<365?(c=((c&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,i[a++]=55296+(c>>10),i[a++]=56320+(c&1023)):i[a++]=(c&15)<<12|(t[r++]&63)<<6|t[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))};xi.write=function(t,r,n){for(var o=n,s,i,a=0;a<t.length;++a)s=t.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((i=t.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(i&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-o}});var Ul=P((Bv,Il)=>{"use strict";Il.exports=z1;function z1(e,t,r){var n=r||8192,o=n>>>1,s=null,i=n;return function(c){if(c<1||c>o)return e(c);i+c>n&&(s=e(n),i=0);var u=t.call(s,i,i+=c);return i&7&&(i=(i|7)+1),u}}});var Bl=P((Nv,kl)=>{"use strict";kl.exports=oe;var Vr=pt();function oe(e,t){this.lo=e>>>0,this.hi=t>>>0}var St=oe.zero=new oe(0,0);St.toNumber=function(){return 0};St.zzEncode=St.zzDecode=function(){return this};St.length=function(){return 1};var $1=oe.zeroHash="\0\0\0\0\0\0\0\0";oe.fromNumber=function(t){if(t===0)return St;var r=t<0;r&&(t=-t);var n=t>>>0,o=(t-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new oe(n,o)};oe.from=function(t){if(typeof t=="number")return oe.fromNumber(t);if(Vr.isString(t))if(Vr.Long)t=Vr.Long.fromString(t);else return oe.fromNumber(parseInt(t,10));return t.low||t.high?new oe(t.low>>>0,t.high>>>0):St};oe.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};oe.prototype.toLong=function(t){return Vr.Long?new Vr.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var lt=String.prototype.charCodeAt;oe.fromHash=function(t){return t===$1?St:new oe((lt.call(t,0)|lt.call(t,1)<<8|lt.call(t,2)<<16|lt.call(t,3)<<24)>>>0,(lt.call(t,4)|lt.call(t,5)<<8|lt.call(t,6)<<16|lt.call(t,7)<<24)>>>0)};oe.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};oe.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};oe.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};oe.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var pt=P(Si=>{"use strict";var E=Si;E.asPromise=ll();E.base64=ml();E.EventEmitter=yl();E.float=Tl();E.inquire=Al();E.utf8=Cl();E.pool=Ul();E.LongBits=Bl();E.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);E.global=E.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||Si;E.emptyArray=Object.freeze?Object.freeze([]):[];E.emptyObject=Object.freeze?Object.freeze({}):{};E.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};E.isString=function(t){return typeof t=="string"||t instanceof String};E.isObject=function(t){return t&&typeof t=="object"};E.isset=E.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};E.Buffer=function(){try{var e=E.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();E._Buffer_from=null;E._Buffer_allocUnsafe=null;E.newBuffer=function(t){return typeof t=="number"?E.Buffer?E._Buffer_allocUnsafe(t):new E.Array(t):E.Buffer?E._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};E.Array=typeof Uint8Array<"u"?Uint8Array:Array;E.Long=E.global.dcodeIO&&E.global.dcodeIO.Long||E.global.Long||E.inquire("long");E.key2Re=/^true|false|0|1$/;E.key32Re=/^-?(?:0|[1-9][0-9]*)$/;E.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;E.longToHash=function(t){return t?E.LongBits.from(t).toHash():E.LongBits.zeroHash};E.longFromHash=function(t,r){var n=E.LongBits.fromHash(t);return E.Long?E.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function Nl(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)(e[n[o]]===void 0||!r)&&(e[n[o]]=t[n[o]]);return e}E.merge=Nl;E.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function Dl(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Nl(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}E.newError=Dl;E.ProtocolError=Dl("ProtocolError");E.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var o=Object.keys(this),s=o.length-1;s>-1;--s)if(r[o[s]]===1&&this[o[s]]!==void 0&&this[o[s]]!==null)return o[s]}};E.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};E.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};E._configure=function(){var e=E.Buffer;if(!e){E._Buffer_from=E._Buffer_allocUnsafe=null;return}E._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},E._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var Ii=P((_v,Ll)=>{"use strict";Ll.exports=U;var Pe=pt(),Ei,jn=Pe.LongBits,_l=Pe.base64,Rl=Pe.utf8;function qr(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function Ti(){}function j1(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function U(){this.len=0,this.head=new qr(Ti,0,0),this.tail=this.head,this.states=null}var Ol=function(){return Pe.Buffer?function(){return(U.create=function(){return new Ei})()}:function(){return new U}};U.create=Ol();U.alloc=function(t){return new Pe.Array(t)};Pe.Array!==Array&&(U.alloc=Pe.pool(U.alloc,Pe.Array.prototype.subarray));U.prototype._push=function(t,r,n){return this.tail=this.tail.next=new qr(t,r,n),this.len+=r,this};function Ai(e,t,r){t[r]=e&255}function M1(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function Pi(e,t){this.len=e,this.next=void 0,this.val=t}Pi.prototype=Object.create(qr.prototype);Pi.prototype.fn=M1;U.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Pi((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};U.prototype.int32=function(t){return t<0?this._push(Ci,10,jn.fromNumber(t)):this.uint32(t)};U.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Ci(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}U.prototype.uint64=function(t){var r=jn.from(t);return this._push(Ci,r.length(),r)};U.prototype.int64=U.prototype.uint64;U.prototype.sint64=function(t){var r=jn.from(t).zzEncode();return this._push(Ci,r.length(),r)};U.prototype.bool=function(t){return this._push(Ai,1,t?1:0)};function vi(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}U.prototype.fixed32=function(t){return this._push(vi,4,t>>>0)};U.prototype.sfixed32=U.prototype.fixed32;U.prototype.fixed64=function(t){var r=jn.from(t);return this._push(vi,4,r.lo)._push(vi,4,r.hi)};U.prototype.sfixed64=U.prototype.fixed64;U.prototype.float=function(t){return this._push(Pe.float.writeFloatLE,4,t)};U.prototype.double=function(t){return this._push(Pe.float.writeDoubleLE,8,t)};var V1=Pe.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var o=0;o<t.length;++o)r[n+o]=t[o]};U.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(Ai,1,0);if(Pe.isString(t)){var n=U.alloc(r=_l.length(t));_l.decode(t,n,0),t=n}return this.uint32(r)._push(V1,r,t)};U.prototype.string=function(t){var r=Rl.length(t);return r?this.uint32(r)._push(Rl.write,r,t):this._push(Ai,1,0)};U.prototype.fork=function(){return this.states=new j1(this),this.head=this.tail=new qr(Ti,0,0),this.len=0,this};U.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new qr(Ti,0,0),this.len=0),this};U.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};U.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};U._configure=function(e){Ei=e,U.create=Ol(),Ei._configure()}});var $l=P((Rv,zl)=>{"use strict";zl.exports=Me;var Fl=Ii();(Me.prototype=Object.create(Fl.prototype)).constructor=Me;var dt=pt();function Me(){Fl.call(this)}Me._configure=function(){Me.alloc=dt._Buffer_allocUnsafe,Me.writeBytesBuffer=dt.Buffer&&dt.Buffer.prototype instanceof Uint8Array&&dt.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var o=0;o<t.length;)r[n++]=t[o++]}};Me.prototype.bytes=function(t){dt.isString(t)&&(t=dt._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(Me.writeBytesBuffer,r,t),this};function q1(e,t,r){e.length<40?dt.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}Me.prototype.string=function(t){var r=dt.Buffer.byteLength(t);return this.uint32(r),r&&this._push(q1,r,t),this};Me._configure()});var Bi=P((Ov,Hl)=>{"use strict";Hl.exports=Z;var Ve=pt(),ki,Vl=Ve.LongBits,H1=Ve.utf8;function _e(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Z(e){this.buf=e,this.pos=0,this.len=e.length}var jl=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Z(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Z(t);throw Error("illegal buffer")},ql=function(){return Ve.Buffer?function(r){return(Z.create=function(o){return Ve.Buffer.isBuffer(o)?new ki(o):jl(o)})(r)}:jl};Z.create=ql();Z.prototype._slice=Ve.Array.prototype.subarray||Ve.Array.prototype.slice;Z.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,_e(this,10);return t}}();Z.prototype.int32=function(){return this.uint32()|0};Z.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Ui(){var e=new Vl(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw _e(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw _e(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Z.prototype.bool=function(){return this.uint32()!==0};function Mn(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Z.prototype.fixed32=function(){if(this.pos+4>this.len)throw _e(this,4);return Mn(this.buf,this.pos+=4)};Z.prototype.sfixed32=function(){if(this.pos+4>this.len)throw _e(this,4);return Mn(this.buf,this.pos+=4)|0};function Ml(){if(this.pos+8>this.len)throw _e(this,8);return new Vl(Mn(this.buf,this.pos+=4),Mn(this.buf,this.pos+=4))}Z.prototype.float=function(){if(this.pos+4>this.len)throw _e(this,4);var t=Ve.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Z.prototype.double=function(){if(this.pos+8>this.len)throw _e(this,4);var t=Ve.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Z.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw _e(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Z.prototype.string=function(){var t=this.bytes();return H1.read(t,0,t.length)};Z.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw _e(this,t);this.pos+=t}else do if(this.pos>=this.len)throw _e(this);while(this.buf[this.pos++]&128);return this};Z.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Z._configure=function(e){ki=e,Z.create=ql(),ki._configure();var t=Ve.Long?"toLong":"toNumber";Ve.merge(Z.prototype,{int64:function(){return Ui.call(this)[t](!1)},uint64:function(){return Ui.call(this)[t](!0)},sint64:function(){return Ui.call(this).zzDecode()[t](!1)},fixed64:function(){return Ml.call(this)[t](!0)},sfixed64:function(){return Ml.call(this)[t](!1)}})}});var Kl=P((Lv,Jl)=>{"use strict";Jl.exports=Et;var Wl=Bi();(Et.prototype=Object.create(Wl.prototype)).constructor=Et;var Gl=pt();function Et(e){Wl.call(this,e)}Et._configure=function(){Gl.Buffer&&(Et.prototype._slice=Gl.Buffer.prototype.slice)};Et.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};Et._configure()});var Ql=P((Fv,Xl)=>{"use strict";Xl.exports=Hr;var Ni=pt();(Hr.prototype=Object.create(Ni.EventEmitter.prototype)).constructor=Hr;function Hr(e,t,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");Ni.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}Hr.prototype.rpcCall=function e(t,r,n,o,s){if(!o)throw TypeError("request must be specified");var i=this;if(!s)return Ni.asPromise(e,i,t,r,n,o);if(!i.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return i.rpcImpl(t,r[i.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(c,u){if(c)return i.emit("error",c,t),s(c);if(u===null){i.end(!0);return}if(!(u instanceof n))try{u=n[i.responseDelimited?"decodeDelimited":"decode"](u)}catch(d){return i.emit("error",d,t),s(d)}return i.emit("data",u,t),s(null,u)})}catch(a){i.emit("error",a,t),setTimeout(function(){s(a)},0);return}};Hr.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Yl=P(Zl=>{"use strict";var G1=Zl;G1.Service=Ql()});var tp=P(($v,ep)=>{"use strict";ep.exports={}});var op=P(np=>{"use strict";var de=np;de.build="minimal";de.Writer=Ii();de.BufferWriter=$l();de.Reader=Bi();de.BufferReader=Kl();de.util=pt();de.rpc=Yl();de.roots=tp();de.configure=rp;function rp(){de.util._configure(),de.Writer._configure(de.BufferWriter),de.Reader._configure(de.BufferReader)}rp()});var ip=P((Mv,sp)=>{"use strict";sp.exports=op()});var Qp=P((wP,Xp)=>{Xp.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}();throw new Error("unknown stream")}});var jh=P(()=>{});var Vh=P((IN,Mh)=>{"use strict";var wx=Cn(),bx=(e,t)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:xx(e,t)});async function*xx(e,t){yield*(await new wx().get(e,t)).iterator()}Mh.exports=bx});var vx={};D(vx,{CID:()=>h,create:()=>Sx,globSource:()=>Ex,multiaddr:()=>X,urlSource:()=>Hh.default});var Zh=e=>Promise.reject(new Error(`No base found for "${e}"`)),Kr=class{constructor(t){this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase||Zh;for(let r of t.bases)this.addBase(r)}addBase(t){if(this._basesByName[t.name]||this._basesByPrefix[t.prefix])throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t])return this._basesByName[t];if(this._basesByPrefix[t])return this._basesByPrefix[t];let r=await this._loadBase(t);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};var Yh=e=>Promise.reject(new Error(`No codec found for "${e}"`)),Xr=class{constructor(t){this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec||Yh;for(let r of t.codecs)this.addCodec(r)}addCodec(t){if(this._codecsByName[t.name]||this._codecsByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){let r=typeof t=="string"?this._codecsByName:this._codecsByCode;if(r[t])return r[t];let n=await this._loadCodec(t);return r[t]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var em=e=>Promise.reject(new Error(`No hasher found for "${e}"`)),Qr=class{constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher||em;for(let r of t.hashers)this.addHasher(r)}addHasher(t){if(this._hashersByName[t.name]||this._hashersByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){let r=typeof t=="string"?this._hashersByName:this._hashersByCode;if(r[t])return r[t];let n=await this._loadHasher(t);return r[t]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};var wo={};D(wo,{code:()=>Km,createLink:()=>fa,createNode:()=>ua,decode:()=>Qm,encode:()=>Xm,name:()=>Jm,prepare:()=>go,validate:()=>yo});var tm=qi,Mi=128,rm=127,nm=~rm,om=Math.pow(2,31);function qi(e,t,r){t=t||[],r=r||0;for(var n=r;e>=om;)t[r++]=e&255|Mi,e/=128;for(;e&nm;)t[r++]=e&255|Mi,e>>>=7;return t[r]=e|0,qi.bytes=r-n+1,t}var sm=so,im=128,Vi=127;function so(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw so.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&Vi)<<o:(i&Vi)*Math.pow(2,o),o+=7}while(i>=im);return so.bytes=s-n,r}var am=Math.pow(2,7),cm=Math.pow(2,14),um=Math.pow(2,21),fm=Math.pow(2,28),lm=Math.pow(2,35),pm=Math.pow(2,42),dm=Math.pow(2,49),hm=Math.pow(2,56),mm=Math.pow(2,63),gm=function(e){return e<am?1:e<cm?2:e<um?3:e<fm?4:e<lm?5:e<pm?6:e<dm?7:e<hm?8:e<mm?9:10},ym={encode:tm,decode:sm,encodingLength:gm},wm=ym,fr=wm;var lr=(e,t=0)=>[fr.decode(e,t),fr.decode.bytes],vt=(e,t,r=0)=>(fr.encode(e,t,r),t),Tt=e=>fr.encodingLength(e);var kx=new Uint8Array(0);var Hi=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Ue=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var Gi=e=>new TextEncoder().encode(e),Wi=e=>new TextDecoder().decode(e);var nt=(e,t)=>{let r=t.byteLength,n=Tt(e),o=n+Tt(r),s=new Uint8Array(o+r);return vt(e,s,0),vt(r,s,n),s.set(t,o),new At(e,r,t,s)},qe=e=>{let t=Ue(e),[r,n]=lr(t),[o,s]=lr(t.subarray(n)),i=t.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new At(r,o,i,t)},Ki=(e,t)=>{if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Hi(e.bytes,r.bytes)}},At=class{constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};var fo={};D(fo,{base58btc:()=>V,base58flickr:()=>Tm});function bm(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function m(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var A=0,B=0,N=0,z=w.length;N!==z&&w[N]===0;)N++,A++;for(var M=(z-N)*d+1>>>0,_=new Uint8Array(M);N!==z;){for(var G=w[N],Q=0,$=M-1;(G!==0||Q<B)&&$!==-1;$--,Q++)G+=256*_[$]>>>0,_[$]=G%a>>>0,G=G/a>>>0;if(G!==0)throw new Error("Non-zero carry");B=Q,N++}for(var W=M-B;W!==M&&_[W]===0;)W++;for(var Ie=c.repeat(A);W<M;++W)Ie+=e.charAt(_[W]);return Ie}function x(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var A=0;if(w[A]!==" "){for(var B=0,N=0;w[A]===c;)B++,A++;for(var z=(w.length-A)*u+1>>>0,M=new Uint8Array(z);w[A];){var _=r[w.charCodeAt(A)];if(_===255)return;for(var G=0,Q=z-1;(_!==0||G<N)&&Q!==-1;Q--,G++)_+=a*M[Q]>>>0,M[Q]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");N=G,A++}if(w[A]!==" "){for(var $=z-N;$!==z&&M[$]===0;)$++;for(var W=new Uint8Array(B+(z-$)),Ie=B;$!==z;)W[Ie++]=M[$++];return W}}}function S(w){var A=x(w);if(A)return A;throw new Error(`Non-${t} character`)}return{encode:m,decodeUnsafe:x,decode:S}}var xm=bm,Sm=xm,Xi=Sm;var io=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},ao=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Qi(this,t)}},co=class{constructor(t){this.decoders=t}or(t){return Qi(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Qi=(e,t)=>new co({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),uo=class{constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new io(t,r,n),this.decoder=new ao(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},Pt=({name:e,prefix:t,encode:r,decode:n})=>new uo(e,t,r,n),st=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:o}=Xi(r,t);return Pt({prefix:e,name:t,encode:n,decode:s=>Ue(o(s))})},Em=(e,t,r,n)=>{let o={};for(let d=0;d<t.length;++d)o[t[d]]=d;let s=e.length;for(;e[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let d=0;d<s;++d){let m=o[e[d]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|m,a+=r,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i},vm=(e,t,r)=>{let n=t[t.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,s+=t[o&a>>i];if(i&&(s+=t[o&a<<r-i]),n)for(;s.length*r&7;)s+="=";return s},J=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Pt({prefix:t,name:e,encode(o){return vm(o,n,r)},decode(o){return Em(o,n,r,e)}});var V=st({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Tm=st({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var lo={};D(lo,{base32:()=>le,base32hex:()=>Im,base32hexpad:()=>km,base32hexpadupper:()=>Bm,base32hexupper:()=>Um,base32pad:()=>Pm,base32padupper:()=>Cm,base32upper:()=>Am,base32z:()=>Nm});var le=J({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Am=J({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pm=J({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Cm=J({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Im=J({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Um=J({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),km=J({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bm=J({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Nm=J({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Zi=(e,t)=>{let{bytes:r,version:n}=e;switch(n){case 0:return _m(r,po(e),t||V.encoder);default:return Rm(r,po(e),t||le.encoder)}};var Yi=new WeakMap,po=e=>{let t=Yi.get(e);if(t==null){let r=new Map;return Yi.set(e,r),r}return t},h=class{constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==pr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Om)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return h.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=nt(t,r);return h.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return h.equals(this,t)}static equals(t,r){let n=r;return n&&t.code===n.code&&t.version===n.version&&Ki(t.multihash,n.multihash)}toString(t){return Zi(this,t)}toJSON(){return{"/":Zi(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof h)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new h(n,o,s,i||ea(n,o,s.bytes))}else if(r[Lm]===!0){let{version:n,multihash:o,code:s}=r,i=qe(o);return h.create(n,s,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==pr)throw new Error(`Version 0 CID must use dag-pb (code: ${pr}) block encoding`);return new h(t,r,n,n.bytes)}case 1:{let o=ea(t,r,n.bytes);return new h(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return h.create(0,pr,t)}static createV1(t,r){return h.create(1,t,r)}static decode(t){let[r,n]=h.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=h.inspectBytes(t),n=r.size-r.multihashSize,o=Ue(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new At(r.multihashCode,r.digestSize,s,o);return[r.version===0?h.createV0(i):h.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[m,x]=lr(t.subarray(r));return r+=x,m},o=n(),s=pr;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),u=r+c,d=u-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:d,size:u}}static parse(t,r){let[n,o]=Dm(t,r),s=h.decode(o);return po(s).set(n,t),s}},Dm=(e,t)=>{switch(e[0]){case"Q":{let r=t||V;return[V.prefix,r.decode(`${V.prefix}${e}`)]}case V.prefix:{let r=t||V;return[V.prefix,r.decode(e)]}case le.prefix:{let r=t||le;return[le.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},_m=(e,t,r)=>{let{prefix:n}=r;if(n!==V.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o},Rm=(e,t,r)=>{let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o},pr=112,Om=18,ea=(e,t,r)=>{let n=Tt(e),o=n+Tt(t),s=new Uint8Array(o+r.byteLength);return vt(e,s,0),vt(t,s,n),s.set(r,o),s},Lm=Symbol.for("@ipld/js-cid/CID");var Fm=new TextDecoder;function ho(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");let o=e[t++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,t]}function Yr(e,t){let r;[r,t]=ho(e,t);let n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function ta(e,t){let r;return[r,t]=ho(e,t),[r&7,r>>3,t]}function zm(e){let t={},r=e.length,n=0;for(;n<r;){let o,s;if([o,s,n]=ta(e,n),s===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=Yr(e,n)}else if(s===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=Yr(e,n),t.Name=Fm.decode(i)}else if(s===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[t.Tsize,n]=ho(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function ra(e){let t=e.length,r=0,n,o=!1,s;for(;r<t;){let a,c;if([a,c,r]=ta(e,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=Yr(e,r),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,r]=Yr(e,r),n.push(zm(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");let i={};return s&&(i.Data=s),i.Links=n||[],i}var oa=new TextEncoder,na=2**32,$m=2**31;function jm(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=dr(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){let n=oa.encode(e.Name);r-=n.length,t.set(n,r),r=dr(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=dr(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function sa(e){let t=Vm(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=dr(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){let s=jm(e.Links[o],r.subarray(0,n));n-=s,n=dr(r,n,s)-1,r[n]=18}return r}function Mm(e){let t=0;if(e.Hash){let r=e.Hash.length;t+=1+r+Ct(r)}if(typeof e.Name=="string"){let r=oa.encode(e.Name).length;t+=1+r+Ct(r)}return typeof e.Tsize=="number"&&(t+=1+Ct(e.Tsize)),t}function Vm(e){let t=0;if(e.Data){let r=e.Data.length;t+=1+r+Ct(r)}if(e.Links)for(let r of e.Links){let n=Mm(r);t+=1+n+Ct(n)}return t}function dr(e,t,r){t-=Ct(r);let n=t;for(;r>=$m;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function Ct(e){return e%2===0&&e++,Math.floor((qm(e)+6)/7)}function qm(e){let t=0;return e>=na&&(e=Math.floor(e/na),t=32),e>=1<<16&&(e>>>=16,t+=16),e>=1<<8&&(e>>>=8,t+=8),t+Hm[e]}var Hm=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var Gm=["Data","Links"],Wm=["Hash","Name","Tsize"],mo=new TextEncoder;function aa(e,t){if(e===t)return 0;let r=e.Name?mo.encode(e.Name):[],n=t.Name?mo.encode(t.Name):[],o=r.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(r[i]!==n[i]){o=r[i],s=n[i];break}return o<s?-1:s<o?1:0}function ia(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function ca(e){if(typeof e.asCID=="object"){let r=h.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Hash){let r=h.asCID(e.Hash);try{r||(typeof e.Hash=="string"?r=h.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=h.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(t.Name=e.Name),typeof e.Tsize=="number"&&(t.Tsize=e.Tsize),t}function go(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Data!==void 0)if(typeof e.Data=="string")t.Data=mo.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))t.Links=e.Links.map(ca),t.Links.sort(aa);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function yo(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!ia(e,Gm))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){let r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!ia(r,Wm))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&aa(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function ua(e,t=[]){return go({Data:e,Links:t})}function fa(e,t,r){return ca({Hash:r,Name:e,Tsize:t})}var Jm="dag-pb",Km=112;function Xm(e){yo(e);let t={};return e.Links&&(t.Links=e.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),sa(t)}function Qm(e){let t=ra(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map(n=>{let o={};try{o.Hash=h.decode(n.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(o.Name=n.Name),n.Tsize!==void 0&&(o.Tsize=n.Tsize),o})),r}var pn={};D(pn,{code:()=>Ng,decode:()=>Uo,encode:()=>Io,name:()=>Bg});var Zm=["string","number","bigint","symbol"],Ym=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function la(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;if(Zm.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(eg(e))return"Buffer";let r=tg(e);return r||"Object"}function eg(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function tg(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Ym.includes(t))return t}var p=class{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};p.uint=new p(0,"uint",!0);p.negint=new p(1,"negint",!0);p.bytes=new p(2,"bytes",!0);p.string=new p(3,"string",!0);p.array=new p(4,"array",!1);p.map=new p(5,"map",!1);p.tag=new p(6,"tag",!1);p.float=new p(7,"float",!0);p.false=new p(7,"false",!0);p.true=new p(7,"true",!0);p.null=new p(7,"null",!0);p.undefined=new p(7,"undefined",!0);p.break=new p(7,"break",!0);var g=class{constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var It=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",rg=new TextDecoder,ng=new TextEncoder;function en(e){return It&&globalThis.Buffer.isBuffer(e)}function hr(e){return e instanceof Uint8Array?en(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var ma=It?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):da(e,t,r):(e,t,r)=>r-t>64?rg.decode(e.subarray(t,r)):da(e,t,r),tn=It?e=>e.length>64?globalThis.Buffer.from(e):pa(e):e=>e.length>64?ng.encode(e):pa(e),Re=e=>Uint8Array.from(e),Ut=It?(e,t,r)=>en(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),ga=It?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),hr(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},ya=It?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function wa(e,t){if(en(e)&&en(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function pa(e,t=1/0){let r,n=e.length,o=null,s=[];for(let i=0;i<n;++i){if(r=e.charCodeAt(i),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function da(e,t,r){let n=[];for(;t<r;){let o=e[t],s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=r){let a,c,u,d;switch(i){case 1:o<128&&(s=o);break;case 2:a=e[t+1],(a&192)===128&&(d=(o&31)<<6|a&63,d>127&&(s=d));break;case 3:a=e[t+1],c=e[t+2],(a&192)===128&&(c&192)===128&&(d=(o&15)<<12|(a&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(s=d));break;case 4:a=e[t+1],c=e[t+2],u=e[t+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(d=(o&15)<<18|(a&63)<<12|(c&63)<<6|u&63,d>65535&&d<1114112&&(s=d))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),t+=i}return bo(n)}var ha=4096;function bo(e){let t=e.length;if(t<=ha)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ha));return r}var og=256,mr=class{constructor(t=og){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=ya(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Ut(n,0,this.cursor)}else r=ga(this.chunks,this.cursor);return t&&this.reset(),r}};var b="CBOR decode error:",He="CBOR encode error:",gr=[];gr[23]=1;gr[24]=2;gr[25]=3;gr[26]=5;gr[27]=9;function Ge(e,t,r){if(e.length-t<r)throw new Error(`${b} not enough data for type`)}var ne=[24,256,65536,4294967296,BigInt("18446744073709551616")];function he(e,t,r){Ge(e,t,1);let n=e[t];if(r.strict===!0&&n<ne[0])throw new Error(`${b} integer encoded in more bytes than necessary (strict decode)`);return n}function me(e,t,r){Ge(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<ne[1])throw new Error(`${b} integer encoded in more bytes than necessary (strict decode)`);return n}function ge(e,t,r){Ge(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<ne[2])throw new Error(`${b} integer encoded in more bytes than necessary (strict decode)`);return n}function ye(e,t,r){Ge(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<ne[3])throw new Error(`${b} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${b} integers outside of the safe integer range are not supported`)}function ba(e,t,r,n){return new g(p.uint,he(e,t+1,n),2)}function xa(e,t,r,n){return new g(p.uint,me(e,t+1,n),3)}function Sa(e,t,r,n){return new g(p.uint,ge(e,t+1,n),5)}function Ea(e,t,r,n){return new g(p.uint,ye(e,t+1,n),9)}function be(e,t){return se(e,0,t.value)}function se(e,t,r){if(r<ne[0]){let n=Number(r);e.push([t|n])}else if(r<ne[1]){let n=Number(r);e.push([t|24,n])}else if(r<ne[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<ne[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<ne[4]){let o=[t|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,e.push(o)}else throw new Error(`${b} encountered BigInt larger than allowable range`)}}be.encodedSize=function(t){return se.encodedSize(t.value)};se.encodedSize=function(t){return t<ne[0]?1:t<ne[1]?2:t<ne[2]?3:t<ne[3]?5:9};be.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function va(e,t,r,n){return new g(p.negint,-1-he(e,t+1,n),2)}function Ta(e,t,r,n){return new g(p.negint,-1-me(e,t+1,n),3)}function Aa(e,t,r,n){return new g(p.negint,-1-ge(e,t+1,n),5)}var xo=BigInt(-1),Pa=BigInt(1);function Ca(e,t,r,n){let o=ye(e,t+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new g(p.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${b} integers outside of the safe integer range are not supported`);return new g(p.negint,xo-BigInt(o),9)}function rn(e,t){let r=t.value,n=typeof r=="bigint"?r*xo-Pa:r*-1-1;se(e,t.type.majorEncoded,n)}rn.encodedSize=function(t){let r=t.value,n=typeof r=="bigint"?r*xo-Pa:r*-1-1;return n<ne[0]?1:n<ne[1]?2:n<ne[2]?3:n<ne[3]?5:9};rn.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function yr(e,t,r,n){Ge(e,t,r+n);let o=Ut(e,t+r,t+r+n);return new g(p.bytes,o,r+n)}function Ia(e,t,r,n){return yr(e,t,1,r)}function Ua(e,t,r,n){return yr(e,t,2,he(e,t+1,n))}function ka(e,t,r,n){return yr(e,t,3,me(e,t+1,n))}function Ba(e,t,r,n){return yr(e,t,5,ge(e,t+1,n))}function Na(e,t,r,n){let o=ye(e,t+1,n);if(typeof o=="bigint")throw new Error(`${b} 64-bit integer bytes lengths not supported`);return yr(e,t,9,o)}function nn(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===p.string?tn(e.value):e.value),e.encodedBytes}function kt(e,t){let r=nn(t);se(e,t.type.majorEncoded,r.length),e.push(r)}kt.encodedSize=function(t){let r=nn(t);return se.encodedSize(r.length)+r.length};kt.compareTokens=function(t,r){return ig(nn(t),nn(r))};function ig(e,t){return e.length<t.length?-1:e.length>t.length?1:wa(e,t)}function wr(e,t,r,n,o){let s=r+n;Ge(e,t,s);let i=new g(p.string,ma(e,t+r,t+s),s);return o.retainStringBytes===!0&&(i.byteValue=Ut(e,t+r,t+s)),i}function Da(e,t,r,n){return wr(e,t,1,r,n)}function _a(e,t,r,n){return wr(e,t,2,he(e,t+1,n),n)}function Ra(e,t,r,n){return wr(e,t,3,me(e,t+1,n),n)}function Oa(e,t,r,n){return wr(e,t,5,ge(e,t+1,n),n)}function La(e,t,r,n){let o=ye(e,t+1,n);if(typeof o=="bigint")throw new Error(`${b} 64-bit integer string lengths not supported`);return wr(e,t,9,o,n)}var Fa=kt;function Bt(e,t,r,n){return new g(p.array,n,r)}function za(e,t,r,n){return Bt(e,t,1,r)}function $a(e,t,r,n){return Bt(e,t,2,he(e,t+1,n))}function ja(e,t,r,n){return Bt(e,t,3,me(e,t+1,n))}function Ma(e,t,r,n){return Bt(e,t,5,ge(e,t+1,n))}function Va(e,t,r,n){let o=ye(e,t+1,n);if(typeof o=="bigint")throw new Error(`${b} 64-bit integer array lengths not supported`);return Bt(e,t,9,o)}function qa(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${b} indefinite length items not allowed`);return Bt(e,t,1,1/0)}function on(e,t){se(e,p.array.majorEncoded,t.value)}on.compareTokens=be.compareTokens;on.encodedSize=function(t){return se.encodedSize(t.value)};function Nt(e,t,r,n){return new g(p.map,n,r)}function Ha(e,t,r,n){return Nt(e,t,1,r)}function Ga(e,t,r,n){return Nt(e,t,2,he(e,t+1,n))}function Wa(e,t,r,n){return Nt(e,t,3,me(e,t+1,n))}function Ja(e,t,r,n){return Nt(e,t,5,ge(e,t+1,n))}function Ka(e,t,r,n){let o=ye(e,t+1,n);if(typeof o=="bigint")throw new Error(`${b} 64-bit integer map lengths not supported`);return Nt(e,t,9,o)}function Xa(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${b} indefinite length items not allowed`);return Nt(e,t,1,1/0)}function sn(e,t){se(e,p.map.majorEncoded,t.value)}sn.compareTokens=be.compareTokens;sn.encodedSize=function(t){return se.encodedSize(t.value)};function Qa(e,t,r,n){return new g(p.tag,r,1)}function Za(e,t,r,n){return new g(p.tag,he(e,t+1,n),2)}function Ya(e,t,r,n){return new g(p.tag,me(e,t+1,n),3)}function ec(e,t,r,n){return new g(p.tag,ge(e,t+1,n),5)}function tc(e,t,r,n){return new g(p.tag,ye(e,t+1,n),9)}function an(e,t){se(e,p.tag.majorEncoded,t.value)}an.compareTokens=be.compareTokens;an.encodedSize=function(t){return se.encodedSize(t.value)};var pg=20,dg=21,hg=22,mg=23;function rc(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${b} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new g(p.null,null,1):new g(p.undefined,void 0,1)}function nc(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${b} indefinite length items not allowed`);return new g(p.break,void 0,1)}function So(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${b} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${b} Infinity values are not supported`)}return new g(p.float,e,t)}function oc(e,t,r,n){return So(Eo(e,t+1),3,n)}function sc(e,t,r,n){return So(vo(e,t+1),5,n)}function ic(e,t,r,n){return So(fc(e,t+1),9,n)}function cn(e,t,r){let n=t.value;if(n===!1)e.push([p.float.majorEncoded|pg]);else if(n===!0)e.push([p.float.majorEncoded|dg]);else if(n===null)e.push([p.float.majorEncoded|hg]);else if(n===void 0)e.push([p.float.majorEncoded|mg]);else{let o,s=!1;(!r||r.float64!==!0)&&(cc(n),o=Eo(ke,1),n===o||Number.isNaN(n)?(ke[0]=249,e.push(ke.slice(0,3)),s=!0):(uc(n),o=vo(ke,1),n===o&&(ke[0]=250,e.push(ke.slice(0,5)),s=!0))),s||(gg(n),o=fc(ke,1),ke[0]=251,e.push(ke.slice(0,9)))}}cn.encodedSize=function(t,r){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){cc(n);let o=Eo(ke,1);if(n===o||Number.isNaN(n))return 3;if(uc(n),o=vo(ke,1),n===o)return 5}return 9};var ac=new ArrayBuffer(9),xe=new DataView(ac,1),ke=new Uint8Array(ac,0);function cc(e){if(e===1/0)xe.setUint16(0,31744,!1);else if(e===-1/0)xe.setUint16(0,64512,!1);else if(Number.isNaN(e))xe.setUint16(0,32256,!1);else{xe.setFloat32(0,e);let t=xe.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)xe.setUint16(0,31744,!1);else if(r===0)xe.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?xe.setUint16(0,0):o<-14?xe.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):xe.setUint16(0,(t&2147483648)>>16|o+15<<10|n>>13,!1)}}}function Eo(e,t){if(e.length-t<2)throw new Error(`${b} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function uc(e){xe.setFloat32(0,e,!1)}function vo(e,t){if(e.length-t<4)throw new Error(`${b} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function gg(e){xe.setFloat64(0,e,!1)}function fc(e,t){if(e.length-t<8)throw new Error(`${b} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}cn.compareTokens=be.compareTokens;function k(e,t,r){throw new Error(`${b} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function un(e){return()=>{throw new Error(`${b} ${e}`)}}var y=[];for(let e=0;e<=23;e++)y[e]=k;y[24]=ba;y[25]=xa;y[26]=Sa;y[27]=Ea;y[28]=k;y[29]=k;y[30]=k;y[31]=k;for(let e=32;e<=55;e++)y[e]=k;y[56]=va;y[57]=Ta;y[58]=Aa;y[59]=Ca;y[60]=k;y[61]=k;y[62]=k;y[63]=k;for(let e=64;e<=87;e++)y[e]=Ia;y[88]=Ua;y[89]=ka;y[90]=Ba;y[91]=Na;y[92]=k;y[93]=k;y[94]=k;y[95]=un("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)y[e]=Da;y[120]=_a;y[121]=Ra;y[122]=Oa;y[123]=La;y[124]=k;y[125]=k;y[126]=k;y[127]=un("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)y[e]=za;y[152]=$a;y[153]=ja;y[154]=Ma;y[155]=Va;y[156]=k;y[157]=k;y[158]=k;y[159]=qa;for(let e=160;e<=183;e++)y[e]=Ha;y[184]=Ga;y[185]=Wa;y[186]=Ja;y[187]=Ka;y[188]=k;y[189]=k;y[190]=k;y[191]=Xa;for(let e=192;e<=215;e++)y[e]=Qa;y[216]=Za;y[217]=Ya;y[218]=ec;y[219]=tc;y[220]=k;y[221]=k;y[222]=k;y[223]=k;for(let e=224;e<=243;e++)y[e]=un("simple values are not supported");y[244]=k;y[245]=k;y[246]=k;y[247]=rc;y[248]=un("simple values are not supported");y[249]=oc;y[250]=sc;y[251]=ic;y[252]=k;y[253]=k;y[254]=k;y[255]=nc;var Be=[];for(let e=0;e<24;e++)Be[e]=new g(p.uint,e,1);for(let e=-1;e>=-24;e--)Be[31-e]=new g(p.negint,e,1);Be[64]=new g(p.bytes,new Uint8Array(0),1);Be[96]=new g(p.string,"",1);Be[128]=new g(p.array,0,1);Be[160]=new g(p.map,0,1);Be[244]=new g(p.false,!1,1);Be[245]=new g(p.true,!0,1);Be[246]=new g(p.null,null,1);function lc(e){switch(e.type){case p.false:return Re([244]);case p.true:return Re([245]);case p.null:return Re([246]);case p.bytes:return e.value.length?void 0:Re([64]);case p.string:return e.value===""?Re([96]):void 0;case p.array:return e.value===0?Re([128]):void 0;case p.map:return e.value===0?Re([160]):void 0;case p.uint:return e.value<24?Re([Number(e.value)]):void 0;case p.negint:if(e.value>=-24)return Re([31-Number(e.value)])}}var wg={float64:!1,mapSorter:Sg,quickEncodeToken:lc};function bg(){let e=[];return e[p.uint.major]=be,e[p.negint.major]=rn,e[p.bytes.major]=kt,e[p.string.major]=Fa,e[p.array.major]=on,e[p.map.major]=sn,e[p.tag.major]=an,e[p.float.major]=cn,e}var pc=bg(),To=new mr,Dt=class{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${He} object contains circular references`);return new Dt(r,t)}},it={null:new g(p.null,null),undefined:new g(p.undefined,void 0),true:new g(p.true,!0),false:new g(p.false,!1),emptyArray:new g(p.array,0),emptyMap:new g(p.map,0)},at={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new g(p.float,e):e>=0?new g(p.uint,e):new g(p.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new g(p.uint,e):new g(p.negint,e)},Uint8Array(e,t,r,n){return new g(p.bytes,e)},string(e,t,r,n){return new g(p.string,e)},boolean(e,t,r,n){return e?it.true:it.false},null(e,t,r,n){return it.null},undefined(e,t,r,n){return it.undefined},ArrayBuffer(e,t,r,n){return new g(p.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new g(p.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[it.emptyArray,new g(p.break)]:it.emptyArray;n=Dt.createCheck(n,e);let o=[],s=0;for(let i of e)o[s++]=fn(i,r,n);return r.addBreakTokens?[new g(p.array,e.length),o,new g(p.break)]:[new g(p.array,e.length),o]},Object(e,t,r,n){let o=t!=="Object",s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return r.addBreakTokens===!0?[it.emptyMap,new g(p.break)]:it.emptyMap;n=Dt.createCheck(n,e);let a=[],c=0;for(let u of s)a[c++]=[fn(u,r,n),fn(o?e.get(u):e[u],r,n)];return xg(a,r),r.addBreakTokens?[new g(p.map,i),a,new g(p.break)]:[new g(p.map,i),a]}};at.Map=at.Object;at.Buffer=at.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))at[`${e}Array`]=at.DataView;function fn(e,t={},r){let n=la(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||at[n];if(typeof o=="function"){let i=o(e,n,t,r);if(i!=null)return i}let s=at[n];if(!s)throw new Error(`${He} unsupported type: ${n}`);return s(e,n,t,r)}function xg(e,t){t.mapSorter&&e.sort(t.mapSorter)}function Sg(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,s=pc[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function dc(e,t,r,n){if(Array.isArray(t))for(let o of t)dc(e,o,r,n);else r[t.type.major](e,t,n)}function Ao(e,t,r){let n=fn(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let s=t[n.type.major];if(s.encodedSize){let i=s.encodedSize(n,r),a=new mr(i);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return hr(a.chunks[0])}}return To.reset(),dc(To,n,t,r),To.toBytes(!0)}function Po(e,t){return t=Object.assign({},wg,t),Ao(e,pc,t)}var Eg={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Co=class{constructor(t,r={}){this.pos=0,this.data=t,this.options=r}done(){return this.pos>=this.data.length}next(){let t=this.data[this.pos],r=Be[t];if(r===void 0){let n=y[t];if(!n)throw new Error(`${b} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=n(this.data,this.pos,o,this.options)}return this.pos+=r.encodedLength,r}},br=Symbol.for("DONE"),ln=Symbol.for("BREAK");function vg(e,t,r){let n=[];for(let o=0;o<e.value;o++){let s=xr(t,r);if(s===ln){if(e.value===1/0)break;throw new Error(`${b} got unexpected break to lengthed array`)}if(s===br)throw new Error(`${b} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=s}return n}function Tg(e,t,r){let n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let i=0;i<e.value;i++){let a=xr(t,r);if(a===ln){if(e.value===1/0)break;throw new Error(`${b} got unexpected break to lengthed map`)}if(a===br)throw new Error(`${b} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${b} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(a)||!n&&a in o))throw new Error(`${b} found repeat map key "${a}"`);let c=xr(t,r);if(c===br)throw new Error(`${b} found map but not enough entries (got ${i} [no value], expected ${e.value})`);n?s.set(a,c):o[a]=c}return n?s:o}function xr(e,t){if(e.done())return br;let r=e.next();if(r.type===p.break)return ln;if(r.type.terminal)return r.value;if(r.type===p.array)return vg(r,e,t);if(r.type===p.map)return Tg(r,e,t);if(r.type===p.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=xr(e,t);return t.tags[r.value](n)}throw new Error(`${b} tag not supported (${r.value})`)}throw new Error("unsupported")}function Sr(e,t){if(!(e instanceof Uint8Array))throw new Error(`${b} data to decode must be a Uint8Array`);t=Object.assign({},Eg,t);let r=t.tokenizer||new Co(e,t),n=xr(r,t);if(n===br)throw new Error(`${b} did not find any content to decode`);if(n===ln)throw new Error(`${b} got unexpected break`);if(!r.done())throw new Error(`${b} too many terminals, data makes no sense`);return n}var hc=42;function Pg(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=h.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new g(p.tag,hc),new g(p.bytes,r)]}function Cg(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function Ig(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Ug={float64:!0,typeEncoders:{Object:Pg,undefined:Cg,number:Ig}};function kg(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return h.decode(e.subarray(1))}var mc={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};mc.tags[hc]=kg;var Bg="dag-cbor",Ng=113,Io=e=>Po(e,Ug),Uo=e=>Sr(e,mc);var Fo={};D(Fo,{code:()=>Vg,decode:()=>bc,encode:()=>wc,format:()=>qg,name:()=>Mg,parse:()=>Gg,stringify:()=>qg});var Bo=({name:e,code:t,encode:r})=>new ko(e,t,r),ko=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?nt(this.code,r):r.then(n=>nt(this.code,n))}else throw Error("Unknown type, must be binary type")}};var No={};D(No,{base64:()=>_t,base64pad:()=>Dg,base64url:()=>ct,base64urlpad:()=>_g});var _t=J({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Dg=J({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ct=J({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_g=J({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Do=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){let r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===p.array&&(r.elements++,r.elements!==1&&t.push([44])),r.type===p.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?t.push([44]):t.push([58]))))}[p.uint.major](t,r){this.prefix(t);let n=String(r.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);t.push(o)}[p.negint.major](t,r){this[p.uint.major](t,r)}[p.bytes.major](t,r){throw new Error(`${He} unsupported type: Uint8Array`)}[p.string.major](t,r){this.prefix(t);let n=tn(JSON.stringify(r.value));t.push(n.length>32?hr(n):n)}[p.array.major](t,r){this.prefix(t),this.inRecursive.push({type:p.array,elements:0}),t.push([91])}[p.map.major](t,r){this.prefix(t),this.inRecursive.push({type:p.map,elements:0}),t.push([123])}[p.tag.major](t,r){}[p.float.major](t,r){if(r.type.name==="break"){let i=this.inRecursive.pop();if(i){if(i.type===p.array)t.push([93]);else if(i.type===p.map)t.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${He} unsupported type: undefined`);if(this.prefix(t),r.type.name==="true"){t.push([116,114,117,101]);return}else if(r.type.name==="false"){t.push([102,97,108,115,101]);return}else if(r.type.name==="null"){t.push([110,117,108,108]);return}let n=String(r.value),o=[],s=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!s&&(o[i]===46||o[i]===101||o[i]===69)&&(s=!0);s||(o.push(46),o.push(48)),t.push(o)}};function Rg(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${He} complex map keys are not supported`);let r=e[0],n=t[0];if(r.type!==p.string||n.type!==p.string)throw new Error(`${He} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${He} unexpected duplicate map keys, this is not supported`)}var Og={addBreakTokens:!0,mapSorter:Rg};function _o(e,t){return t=Object.assign({},Og,t),Ao(e,new Do,t)}var Rt=class{constructor(t,r={}){this.pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;t===32||t===9||t===13||t===10;)t=this.data[++this.pos]}expect(t){if(this.data.length-this.pos<t.length)throw new Error(`${b} unexpected end of input at position ${this.pos}`);for(let r=0;r<t.length;r++)if(this.data[this.pos++]!==t[r])throw new Error(`${b} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){let t=this.pos,r=!1,n=!1,o=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this.pos++;else break}};if(this.ch()===45&&(r=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,n=!0;else return new g(p.uint,0,this.pos-t);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this.pos===t+1)throw new Error(`${b} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${b} unexpected token at position ${this.pos}`);n=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(t,this.pos)),i=parseFloat(s);return n?new g(p.float,i,this.pos-t):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new g(i>=0?p.uint:p.negint,i,this.pos-t):new g(i>=0?p.uint:p.negint,BigInt(s),this.pos-t)}parseString(){if(this.ch()!==34)throw new Error(`${b} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let s=this.pos,i=0;s<this.data.length&&i<65536;s++,i++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this.pos,s));return this.pos=s+1,new g(p.string,c,i)}}let t=this.pos,r=[],n=()=>{if(this.pos+4>=this.data.length)throw new Error(`${b} unexpected end of unicode escape sequence at position ${this.pos}`);let s=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${b} unexpected unicode escape character at position ${this.pos}`);s=s*16+a,this.pos++}return s},o=()=>{let s=this.ch(),i=null,a=s>239?4:s>223?3:s>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${b} unexpected unicode sequence at position ${this.pos}`);let c,u,d,m;switch(a){case 1:s<128&&(i=s);break;case 2:c=this.data[this.pos+1],(c&192)===128&&(m=(s&31)<<6|c&63,m>127&&(i=m));break;case 3:c=this.data[this.pos+1],u=this.data[this.pos+2],(c&192)===128&&(u&192)===128&&(m=(s&15)<<12|(c&63)<<6|u&63,m>2047&&(m<55296||m>57343)&&(i=m));break;case 4:c=this.data[this.pos+1],u=this.data[this.pos+2],d=this.data[this.pos+3],(c&192)===128&&(u&192)===128&&(d&192)===128&&(m=(s&15)<<18|(c&63)<<12|(u&63)<<6|d&63,m>65535&&m<1114112&&(i=m))}i===null?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this.pos+=a};for(;!this.done();){let s=this.ch(),i;switch(s){case 92:if(this.pos++,this.done())throw new Error(`${b} unexpected string termination at position ${this.pos}`);switch(i=this.ch(),this.pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${b} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new g(p.string,bo(r),this.pos-t);default:if(s<32)throw new Error(`${b} invalid control character at position ${this.pos}`);s<128?(r.push(s),this.pos++):o()}}throw new Error(`${b} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new g(p.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new g(p.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new g(p.null,null,4);case 102:return this.expect([102,97,108,115,101]),new g(p.false,!1,5);case 116:return this.expect([116,114,117,101]),new g(p.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${b} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new g(p.break,void 0,1);if(this.ch()!==44)throw new Error(`${b} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new g(p.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new g(p.break,void 0,1);if(this.ch()!==44)throw new Error(`${b} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new g(p.break,void 0,1);let t=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${b} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${b} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}};function Ro(e,t){return t=Object.assign({tokenizer:new Rt(e,t)},t),Sr(e,t)}function Fg(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=h.asCID(e);if(!t)return null;let r=t.toString();return[new g(p.map,1/0,1),new g(p.string,"/",1),new g(p.string,r,r.length),new g(p.break,void 0,1)]}function yc(e){let t=_t.encode(e).slice(1);return[new g(p.map,1/0,1),new g(p.string,"/",1),new g(p.map,1/0,1),new g(p.string,"bytes",5),new g(p.string,t,t.length),new g(p.break,void 0,1),new g(p.break,void 0,1)]}function zg(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function $g(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var jg={typeEncoders:{Object:Fg,Uint8Array:yc,Buffer:yc,undefined:zg,number:$g}},Oo=class extends Rt{constructor(t,r){super(t,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let t=this._next();if(t.type===p.map){let r=this._next();if(r.type===p.string&&r.value==="/"){let n=this._next();if(n.type===p.string){if(this._next().type!==p.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new g(p.tag,42,0)}if(n.type===p.map){let o=this._next();if(o.type===p.string&&o.value==="bytes"){let s=this._next();if(s.type===p.string){for(let a=0;a<2;a++)if(this._next().type!==p.break)throw new Error("Invalid encoded Bytes form");let i=_t.decode(`m${s.value}`);return new g(p.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return t}},Lo={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Lo.tags[42]=h.parse;var Mg="dag-json",Vg=297,wc=e=>_o(e,jg),bc=e=>{let t=Object.assign(Lo,{tokenizer:new Oo(e,Lo)});return Ro(e,t)},qg=e=>Hg.decode(wc(e));var Hg=new TextDecoder,Gg=e=>bc(Wg.encode(e)),Wg=new TextEncoder;var zo={};D(zo,{code:()=>ty,decode:()=>sy,encode:()=>oy,name:()=>ey,toGeneral:()=>Ic});function Ne(e){return ct.encode(e).slice(1)}function Se(e){return ct.decode(`u${e}`)}function xc(e){let[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:h.decode(Se(r))}}function Jg(e){let t={signature:Se(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Se(e.protected)),t}function Sc(e){let t=Se(e.payload);try{h.decode(t)}catch{throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(Jg)}}function Kg(e){let t={signature:Ne(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Ne(e.protected)),t}function Ec(e){let t={payload:Ne(e.payload),signatures:e.signatures.map(Kg)};return t.link=h.decode(new Uint8Array(e.payload)),t}function vc(e){let[t,r,n,o,s]=e,i={ciphertext:o,iv:n,protected:t,tag:s};return r&&(i.recipients=[{encrypted_key:r}]),i}function Qg(e){let t={};return e.encrypted_key&&(t.encrypted_key=Se(e.encrypted_key)),e.header&&(t.header=e.header),t}function Tc(e){let t={ciphertext:Se(e.ciphertext),protected:Se(e.protected),iv:Se(e.iv),tag:Se(e.tag)};return e.aad&&(t.aad=Se(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Qg)),e.unprotected&&(t.unprotected=e.unprotected),t}function Zg(e){let t={};return e.encrypted_key&&(t.encrypted_key=Ne(e.encrypted_key)),e.header&&(t.header=e.header),t}function Ac(e){let t={ciphertext:Ne(e.ciphertext),protected:Ne(e.protected),iv:Ne(e.iv),tag:Ne(e.tag)};return e.aad&&(t.aad=Ne(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Zg)),e.unprotected&&(t.unprotected=e.unprotected),t}var ey="dag-jose",ty=133;function Pc(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function ry(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function ny(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function Cc(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function Ic(e){if(typeof e=="string"){let t=e.split(".");if(t.length===3)return xc(t);if(t.length===5)return vc(t);throw new Error("Not a valid JOSE string")}if(Pc(e)||Cc(e))return e;throw new Error("Not a valid unencoded JOSE object")}function oy(e){typeof e=="string"&&(e=Ic(e));let t;if(Pc(e))t=Sc(e);else if(Cc(e))t=Tc(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(Io(t))}function sy(e){let t;try{t=Uo(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(ry(t))return Ec(t);if(ny(t))return Ac(t);throw new Error("Not a valid DAG-JOSE object")}var $o={};D($o,{identity:()=>mt});var Uc=0,iy="identity",kc=Ue,ay=e=>nt(Uc,kc(e)),mt={code:Uc,name:iy,encode:kc,digest:ay};var jo={};D(jo,{identity:()=>cy});var cy=Pt({prefix:"\0",name:"identity",encode:e=>Wi(e),decode:e=>Gi(e)});var Mo={};D(Mo,{base2:()=>uy});var uy=J({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Vo={};D(Vo,{base8:()=>fy});var fy=J({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var qo={};D(qo,{base10:()=>ly});var ly=st({prefix:"9",name:"base10",alphabet:"0123456789"});var Ho={};D(Ho,{base16:()=>py,base16upper:()=>dy});var py=J({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dy=J({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Go={};D(Go,{base36:()=>hy,base36upper:()=>my});var hy=st({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),my=st({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Wo={};D(Wo,{base256emoji:()=>xy});var Bc=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),gy=Bc.reduce((e,t,r)=>(e[r]=t,e),[]),yy=Bc.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function wy(e){return e.reduce((t,r)=>(t+=gy[r],t),"")}function by(e){let t=[];for(let r of e){let n=yy[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var xy=Pt({prefix:"\u{1F680}",name:"base256emoji",encode:wy,decode:by});var Jo={};D(Jo,{sha256:()=>dn,sha512:()=>Sy});var Nc=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),dn=Bo({name:"sha2-256",code:18,encode:Nc("SHA-256")}),Sy=Bo({name:"sha2-512",code:19,encode:Nc("SHA-512")});var Ko={};D(Ko,{code:()=>vy,decode:()=>Ay,encode:()=>Ty,name:()=>Ey});var Ey="raw",vy=85,Ty=e=>Ue(e),Ay=e=>Ue(e);var Xo={};D(Xo,{code:()=>Uy,decode:()=>By,encode:()=>ky,name:()=>Iy});var Py=new TextEncoder,Cy=new TextDecoder,Iy="json",Uy=512,ky=e=>Py.encode(JSON.stringify(e)),By=e=>JSON.parse(Cy.decode(e));var Ee={...jo,...Mo,...Vo,...qo,...Ho,...lo,...Go,...fo,...No,...Wo},Dc={...Jo,...$o},_c={raw:Ko,json:Xo};var hn=class extends Error{code;props;constructor(t,r,n){super(t),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var ts={};D(ts,{base58btc:()=>pe,base58flickr:()=>Ly});function Ny(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),d=Math.log(256)/Math.log(a);function m(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var A=0,B=0,N=0,z=w.length;N!==z&&w[N]===0;)N++,A++;for(var M=(z-N)*d+1>>>0,_=new Uint8Array(M);N!==z;){for(var G=w[N],Q=0,$=M-1;(G!==0||Q<B)&&$!==-1;$--,Q++)G+=256*_[$]>>>0,_[$]=G%a>>>0,G=G/a>>>0;if(G!==0)throw new Error("Non-zero carry");B=Q,N++}for(var W=M-B;W!==M&&_[W]===0;)W++;for(var Ie=c.repeat(A);W<M;++W)Ie+=e.charAt(_[W]);return Ie}function x(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var A=0;if(w[A]!==" "){for(var B=0,N=0;w[A]===c;)B++,A++;for(var z=(w.length-A)*u+1>>>0,M=new Uint8Array(z);w[A];){var _=r[w.charCodeAt(A)];if(_===255)return;for(var G=0,Q=z-1;(_!==0||G<N)&&Q!==-1;Q--,G++)_+=a*M[Q]>>>0,M[Q]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");N=G,A++}if(w[A]!==" "){for(var $=z-N;$!==z&&M[$]===0;)$++;for(var W=new Uint8Array(B+(z-$)),Ie=B;$!==z;)W[Ie++]=M[$++];return W}}}function S(w){var A=x(w);if(A)return A;throw new Error(`Non-${t} character`)}return{encode:m,decodeUnsafe:x,decode:S}}var Dy=Ny,_y=Dy,Rc=_y;var OS=new Uint8Array(0);var Oc=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},We=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var Lc=e=>new TextEncoder().encode(e),Fc=e=>new TextDecoder().decode(e);var Qo=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Zo=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return $c(this,t)}},Yo=class{constructor(t){this.decoders=t}or(t){return $c(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},$c=(e,t)=>new Yo({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),es=class{constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Qo(t,r,n),this.decoder=new Zo(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},Ot=({name:e,prefix:t,encode:r,decode:n})=>new es(e,t,r,n),ut=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:o}=Rc(r,t);return Ot({prefix:e,name:t,encode:n,decode:s=>We(o(s))})},Ry=(e,t,r,n)=>{let o={};for(let d=0;d<t.length;++d)o[t[d]]=d;let s=e.length;for(;e[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let d=0;d<s;++d){let m=o[e[d]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|m,a+=r,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return i},Oy=(e,t,r)=>{let n=t[t.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,s+=t[o&a>>i];if(i&&(s+=t[o&a<<r-i]),n)for(;s.length*r&7;)s+="=";return s},K=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Ot({prefix:t,name:e,encode(o){return Oy(o,n,r)},decode(o){return Ry(o,n,r,e)}});var pe=ut({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ly=ut({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var rs={};D(rs,{base32:()=>Je,base32hex:()=>jy,base32hexpad:()=>Vy,base32hexpadupper:()=>qy,base32hexupper:()=>My,base32pad:()=>zy,base32padupper:()=>$y,base32upper:()=>Fy,base32z:()=>Hy});var Je=K({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Fy=K({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zy=K({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$y=K({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),jy=K({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),My=K({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Vy=K({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qy=K({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hy=K({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Gy=Vc,jc=128,Wy=127,Jy=~Wy,Ky=Math.pow(2,31);function Vc(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Ky;)t[r++]=e&255|jc,e/=128;for(;e&Jy;)t[r++]=e&255|jc,e>>>=7;return t[r]=e|0,Vc.bytes=r-n+1,t}var Xy=ns,Qy=128,Mc=127;function ns(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw ns.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&Mc)<<o:(i&Mc)*Math.pow(2,o),o+=7}while(i>=Qy);return ns.bytes=s-n,r}var Zy=Math.pow(2,7),Yy=Math.pow(2,14),ew=Math.pow(2,21),tw=Math.pow(2,28),rw=Math.pow(2,35),nw=Math.pow(2,42),ow=Math.pow(2,49),sw=Math.pow(2,56),iw=Math.pow(2,63),aw=function(e){return e<Zy?1:e<Yy?2:e<ew?3:e<tw?4:e<rw?5:e<nw?6:e<ow?7:e<sw?8:e<iw?9:10},cw={encode:Gy,decode:Xy,encodingLength:aw},uw=cw,Er=uw;var vr=(e,t=0)=>[Er.decode(e,t),Er.decode.bytes],Lt=(e,t,r=0)=>(Er.encode(e,t,r),t),Ft=e=>Er.encodingLength(e);var gt=(e,t)=>{let r=t.byteLength,n=Ft(e),o=n+Ft(r),s=new Uint8Array(o+r);return Lt(e,s,0),Lt(r,s,n),s.set(t,o),new zt(e,r,t,s)},gn=e=>{let t=We(e),[r,n]=vr(t),[o,s]=vr(t.subarray(n)),i=t.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new zt(r,o,i,t)},qc=(e,t)=>{if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Oc(e.bytes,r.bytes)}},zt=class{constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};var Hc=(e,t)=>{let{bytes:r,version:n}=e;switch(n){case 0:return lw(r,os(e),t||pe.encoder);default:return pw(r,os(e),t||Je.encoder)}};var Gc=new WeakMap,os=e=>{let t=Gc.get(e);if(t==null){let r=new Map;return Gc.set(e,r),r}return t},j=class{constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==Tr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==dw)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return j.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=gt(t,r);return j.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return j.equals(this,t)}static equals(t,r){let n=r;return n&&t.code===n.code&&t.version===n.version&&qc(t.multihash,n.multihash)}toString(t){return Hc(this,t)}toJSON(){return{"/":Hc(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof j)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new j(n,o,s,i||Wc(n,o,s.bytes))}else if(r[hw]===!0){let{version:n,multihash:o,code:s}=r,i=gn(o);return j.create(n,s,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==Tr)throw new Error(`Version 0 CID must use dag-pb (code: ${Tr}) block encoding`);return new j(t,r,n,n.bytes)}case 1:{let o=Wc(t,r,n.bytes);return new j(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return j.create(0,Tr,t)}static createV1(t,r){return j.create(1,t,r)}static decode(t){let[r,n]=j.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=j.inspectBytes(t),n=r.size-r.multihashSize,o=We(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new zt(r.multihashCode,r.digestSize,s,o);return[r.version===0?j.createV0(i):j.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[m,x]=vr(t.subarray(r));return r+=x,m},o=n(),s=Tr;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),u=r+c,d=u-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:d,size:u}}static parse(t,r){let[n,o]=fw(t,r),s=j.decode(o);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return os(s).set(n,t),s}},fw=(e,t)=>{switch(e[0]){case"Q":{let r=t||pe;return[pe.prefix,r.decode(`${pe.prefix}${e}`)]}case pe.prefix:{let r=t||pe;return[pe.prefix,r.decode(e)]}case Je.prefix:{let r=t||Je;return[Je.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},lw=(e,t,r)=>{let{prefix:n}=r;if(n!==pe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o},pw=(e,t,r)=>{let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o},Tr=112,dw=18,Wc=(e,t,r)=>{let n=Ft(e),o=n+Ft(t),s=new Uint8Array(o+r.byteLength);return Lt(e,s,0),Lt(t,s,n),s.set(r,o),s},hw=Symbol.for("@ipld/js-cid/CID");function Ke(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function jt(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Mt(e=0){return globalThis.Buffer?.allocUnsafe!=null?jt(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Kc(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Jc=Kc("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),ss=Kc("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Mt(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),mw={utf8:Jc,"utf-8":Jc,hex:Ee.base16,latin1:ss,ascii:ss,binary:ss,...Ee},yn=mw;function T(e,t="utf8"){let r=yn[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var gw=Math.pow(2,7),yw=Math.pow(2,14),ww=Math.pow(2,21),is=Math.pow(2,28),as=Math.pow(2,35),cs=Math.pow(2,42),us=Math.pow(2,49),O=128,ae=127;function Oe(e){if(e<gw)return 1;if(e<yw)return 2;if(e<ww)return 3;if(e<is)return 4;if(e<as)return 5;if(e<cs)return 6;if(e<us)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function bw(e,t,r=0){switch(Oe(e)){case 8:t[r++]=e&255|O,e/=128;case 7:t[r++]=e&255|O,e/=128;case 6:t[r++]=e&255|O,e/=128;case 5:t[r++]=e&255|O,e/=128;case 4:t[r++]=e&255|O,e>>>=7;case 3:t[r++]=e&255|O,e>>>=7;case 2:t[r++]=e&255|O,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function xw(e,t,r=0){switch(Oe(e)){case 8:t.set(r++,e&255|O),e/=128;case 7:t.set(r++,e&255|O),e/=128;case 6:t.set(r++,e&255|O),e/=128;case 5:t.set(r++,e&255|O),e/=128;case 4:t.set(r++,e&255|O),e>>>=7;case 3:t.set(r++,e&255|O),e>>>=7;case 2:t.set(r++,e&255|O),e>>>=7;case 1:{t.set(r++,e&255),e>>>=7;break}default:throw new Error("unreachable")}return t}function Sw(e,t){let r=e[t],n=0;if(n+=r&ae,r<O||(r=e[t+1],n+=(r&ae)<<7,r<O)||(r=e[t+2],n+=(r&ae)<<14,r<O)||(r=e[t+3],n+=(r&ae)<<21,r<O)||(r=e[t+4],n+=(r&ae)*is,r<O)||(r=e[t+5],n+=(r&ae)*as,r<O)||(r=e[t+6],n+=(r&ae)*cs,r<O)||(r=e[t+7],n+=(r&ae)*us,r<O))return n;throw new RangeError("Could not decode varint")}function Ew(e,t){let r=e.get(t),n=0;if(n+=r&ae,r<O||(r=e.get(t+1),n+=(r&ae)<<7,r<O)||(r=e.get(t+2),n+=(r&ae)<<14,r<O)||(r=e.get(t+3),n+=(r&ae)<<21,r<O)||(r=e.get(t+4),n+=(r&ae)*is,r<O)||(r=e.get(t+5),n+=(r&ae)*as,r<O)||(r=e.get(t+6),n+=(r&ae)*cs,r<O)||(r=e.get(t+7),n+=(r&ae)*us,r<O))return n;throw new RangeError("Could not decode varint")}function Vt(e,t,r=0){return t==null&&(t=Mt(Oe(e))),t instanceof Uint8Array?bw(e,t,r):xw(e,t,r)}function yt(e,t=0){return e instanceof Uint8Array?Sw(e,t):Ew(e,t)}function L(e,t){t==null&&(t=e.reduce((o,s)=>o+s.length,0));let r=Mt(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return jt(r)}var wn=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,o){return this.readAtomically(()=>{let s=0,i=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*o)-1;for(;;){let d=this.readAtomically(()=>{let m=this.readChar();if(m===void 0)return;let x=Number.parseInt(m,t);if(!Number.isNaN(x))return x});if(d===void 0)break;if(s*=t,s+=d,s>u||(i+=1,r!==void 0&&i>r))return}if(i!==0)return!n&&c&&i>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let o=n*2;if(n<r.length-3){let i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return r[o]=i[0],r[o+1]=i[1],r[o+2]=i[2],r[o+3]=i[3],[o+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[o,!1];r[o]=s>>8,r[o+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,o]=t(r);if(n===16)return r;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),i=16-(n+2),[a]=t(s.subarray(0,i));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var Qc=45,vw=15,qt=new wn;function fs(e){if(!(e.length>vw))return qt.new(e).parseWith(()=>qt.readIPv4Addr())}function ls(e){if(!(e.length>Qc))return qt.new(e).parseWith(()=>qt.readIPv6Addr())}function bn(e){if(!(e.length>Qc))return qt.new(e).parseWith(()=>qt.readIPAddr())}var w6=parseInt("0xFFFF",16),b6=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);var ps={};D(ps,{base10:()=>Iw});var Iw=ut({prefix:"9",name:"base10",alphabet:"0123456789"});var ds={};D(ds,{base16:()=>Uw,base16upper:()=>kw});var Uw=K({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),kw=K({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var hs={};D(hs,{base2:()=>Bw});var Bw=K({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ms={};D(ms,{base256emoji:()=>Ow});var eu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Nw=eu.reduce((e,t,r)=>(e[r]=t,e),[]),Dw=eu.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function _w(e){return e.reduce((t,r)=>(t+=Nw[r],t),"")}function Rw(e){let t=[];for(let r of e){let n=Dw[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var Ow=Ot({prefix:"\u{1F680}",name:"base256emoji",encode:_w,decode:Rw});var gs={};D(gs,{base36:()=>Lw,base36upper:()=>Fw});var Lw=ut({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fw=ut({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ys={};D(ys,{base64:()=>zw,base64pad:()=>$w,base64url:()=>jw,base64urlpad:()=>Mw});var zw=K({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$w=K({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),jw=K({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Mw=K({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ws={};D(ws,{base8:()=>Vw});var Vw=K({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var bs={};D(bs,{identity:()=>qw});var qw=Ot({prefix:"\0",name:"identity",encode:e=>Fc(e),decode:e=>Lc(e)});var X6=new TextEncoder,Q6=new TextDecoder;var xs={};D(xs,{identity:()=>Kw});var tu=0,Ww="identity",ru=We,Jw=e=>gt(tu,ru(e)),Kw={code:tu,name:Ww,encode:ru,digest:Jw};var vs={};D(vs,{sha256:()=>Xw,sha512:()=>Qw});var Es=({name:e,code:t,encode:r})=>new Ss(e,t,r),Ss=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?gt(this.code,r):r.then(n=>gt(this.code,n))}else throw Error("Unknown type, must be binary type")}};var ou=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Xw=Es({name:"sha2-256",code:18,encode:ou("SHA-256")}),Qw=Es({name:"sha2-512",code:19,encode:ou("SHA-512")});var su={...bs,...hs,...ws,...ps,...ds,...rs,...gs,...ts,...ys,...ms},sE={...vs,...xs};function re(e,t="utf8"){let r=yn[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?jt(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function Ht(e){return Boolean(fs(e))}function Gt(e){return Boolean(ls(e))}function ve(e){return Boolean(bn(e))}var iu=Ht,Zw=Gt,Ts=function(e){let t=0;if(e=e.toString().trim(),iu(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(Zw(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=iu(r[n]),i;s&&(i=Ts(r[n]),r[n]=T(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,T(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(t+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);o[t++]=s>>8&255,o[t++]=s&255}return o}throw new Error("invalid ip address")},au=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let o=[];for(let s=0;s<r;s++)o.push(e[t+s]);return o.join(".")}if(r===16){let o=[];for(let s=0;s<r;s+=2)o.push(n.getUint16(t+s).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Wt={},As={},eb=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];eb.forEach(e=>{let t=tb(...e);As[t.code]=t,Wt[t.name]=t});function tb(e,t,r,n,o){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(o)}}function F(e){if(typeof e=="number"){if(As[e]!=null)return As[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Wt[e]!=null)return Wt[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var AE=F("ip4"),PE=F("ip6"),CE=F("ipcidr");function Cs(e,t){switch(F(e).code){case 4:case 41:return nb(t);case 42:return fu(t);case 6:case 273:case 33:case 132:return pu(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return fu(t);case 421:return ab(t);case 444:return lu(t);case 445:return lu(t);case 466:return ib(t);default:return T(t,"base16")}}function Is(e,t){switch(F(e).code){case 4:return cu(t);case 41:return cu(t);case 42:return uu(t);case 6:case 273:case 33:case 132:return Us(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return uu(t);case 421:return ob(t);case 444:return cb(t);case 445:return ub(t);case 466:return sb(t);default:return re(t,"base16")}}var Ps=Object.values(su).map(e=>e.decoder),rb=function(){let e=Ps[0].or(Ps[1]);return Ps.slice(2).forEach(t=>e=e.or(t)),e}();function cu(e){if(!ve(e))throw new Error("invalid ip address");return Ts(e)}function nb(e){let t=au(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!ve(t))throw new Error("invalid ip address");return t}function Us(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function pu(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function uu(e){let t=re(e),r=Uint8Array.from(Vt(t.length));return L([r,t],r.length+t.length)}function fu(e){let t=yt(e);if(e=e.slice(Oe(t)),e.length!==t)throw new Error("inconsistent lengths");return T(e)}function ob(e){let t;e[0]==="Q"||e[0]==="1"?t=gn(pe.decode(`z${e}`)).bytes:t=j.parse(e).multihash.bytes;let r=Uint8Array.from(Vt(t.length));return L([r,t],r.length+t.length)}function sb(e){let t=rb.decode(e),r=Uint8Array.from(Vt(t.length));return L([r,t],r.length+t.length)}function ib(e){let t=yt(e),r=e.slice(Oe(t));if(r.length!==t)throw new Error("inconsistent lengths");return"u"+T(r,"base64url")}function ab(e){let t=yt(e),r=e.slice(Oe(t));if(r.length!==t)throw new Error("inconsistent lengths");return T(r,"base58btc")}function cb(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=Je.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Us(n);return L([r,o],r.length+o.length)}function ub(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=Je.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Us(n);return L([r,o],r.length+o.length)}function lu(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=T(t,"base32"),o=pu(r);return`${n}:${o}`}function du(e){e=ks(e);let t=[],r=[],n=null,o=e.split("/").slice(1);if(o.length===1&&o[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let s=0;s<o.length;s++){let i=o[s],a=F(i);if(a.size===0){t.push([a.code]),r.push([a.code]);continue}if(s++,s>=o.length)throw mu("invalid address: "+e);if(a.path===!0){n=ks(o.slice(s).join("/")),t.push([a.code,Is(a.code,n)]),r.push([a.code,n]);break}let c=Is(a.code,o[s]);t.push([a.code,c]),r.push([a.code,Cs(a.code,c)])}return{string:hu(r),bytes:Ns(t),tuples:t,stringTuples:r,path:n}}function Bs(e){let t=[],r=[],n=null,o=0;for(;o<e.length;){let s=yt(e,o),i=Oe(s),a=F(s),c=fb(a,e.slice(o+i));if(c===0){t.push([s]),r.push([s]),o+=i;continue}let u=e.slice(o+i,o+i+c);if(o+=c+i,o>e.length)throw mu("Invalid address Uint8Array: "+T(e,"base16"));t.push([s,u]);let d=Cs(s,u);if(r.push([s,d]),a.path===!0){n=d;break}}return{bytes:Uint8Array.from(e),string:hu(r),tuples:t,stringTuples:r,path:n}}function hu(e){let t=[];return e.map(r=>{let n=F(r[0]);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),ks(t.join("/"))}function Ns(e){return L(e.map(t=>{let r=F(t[0]),n=Uint8Array.from(Vt(r.code));return t.length>1&&t[1]!=null&&(n=L([n,t[1]])),n}))}function fb(e,t){if(e.size>0)return e.size/8;if(e.size===0)return 0;{let r=yt(t instanceof Uint8Array?t:Uint8Array.from(t));return r+Oe(r)}}function ks(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function mu(e){return new Error("Error parsing address: "+e)}var lb=Symbol.for("nodejs.util.inspect.custom"),Ds=Symbol.for("@multiformats/js-multiaddr/multiaddr"),pb=[F("dns").code,F("dns4").code,F("dns6").code,F("dnsaddr").code],Le=class{bytes;#t;#e;#r;#n;[Ds]=!0;constructor(t){t==null&&(t="");let r;if(t instanceof Uint8Array)r=Bs(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);r=du(t)}else if(Ar(t))r=Bs(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,this.#t=r.string,this.#e=r.tuples,this.#r=r.stringTuples,this.#n=r.path}toString(){return this.#t}toJSON(){return this.toString()}toOptions(){let t,r,n,o,s="",i=F("tcp"),a=F("udp"),c=F("ip4"),u=F("ip6"),d=F("dns6"),m=F("ip6zone");for(let[S,w]of this.stringTuples())S===m.code&&(s=`%${w??""}`),pb.includes(S)&&(r=i.name,o=443,n=`${w??""}${s}`,t=S===d.code?6:4),(S===i.code||S===a.code)&&(r=F(S).name,o=parseInt(w??"")),(S===c.code||S===u.code)&&(r=F(S).name,n=`${w??""}${s}`,t=S===u.code?6:4);if(t==null||r==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:o}}protos(){return this.#e.map(([t])=>Object.assign({},F(t)))}protoCodes(){return this.#e.map(([t])=>t)}protoNames(){return this.#e.map(([t])=>F(t).name)}tuples(){return this.#e}stringTuples(){return this.#r}encapsulate(t){return t=new Le(t),new Le(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Le(n.slice(0,o))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new Le(Ns(r.slice(0,n)));return this}getPeerId(){try{let t=[];this.stringTuples().forEach(([n,o])=>{n===Wt.p2p.code&&t.push([n,o]),n===Wt["p2p-circuit"].code&&(t=[])});let r=t.pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?T(pe.decode(`z${n}`),"base58btc"):T(j.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#n}equals(t){return Ke(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=gu.get(r.name);if(n==null)throw new hn(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(s=>new Le(s))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[lb](){return`Multiaddr(${this.#t})`}};var gu=new Map;function Ar(e){return Boolean(e?.[Ds])}function X(e){return new Le(e)}var je=R(_s(),1);var Eb=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;C.nanosecond=C.ns=1/1e6;C.\u00B5s=C.\u03BCs=C.us=C.microsecond=1/1e3;C.millisecond=C.ms=C[""]=1;C.second=C.sec=C.s=C.ms*1e3;C.minute=C.min=C.m=C.s*60;C.hour=C.hr=C.h=C.m*60;C.day=C.d=C.h*24;C.week=C.wk=C.w=C.d*7;C.month=C.b=C.d*(365.25/12);C.year=C.yr=C.y=C.d*365.25;function C(e="",t="ms"){var r=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(Eb,function(n,o,s){s=xu(s),s&&(r=(r||0)+parseFloat(o,10)*s)}),r&&r/(xu(t)||1)}function xu(e){return C[e]||C[e.toLowerCase().replace(/s$/,"")]}var Su=C;var Fe=R(Pu(),1);Fe.default.formatters.b=e=>e==null?"undefined":V.baseEncode(e);Fe.default.formatters.t=e=>e==null?"undefined":le.baseEncode(e);Fe.default.formatters.m=e=>e==null?"undefined":_t.baseEncode(e);Fe.default.formatters.p=e=>e==null?"undefined":e.toString();Fe.default.formatters.c=e=>e==null?"undefined":e.toString();Fe.default.formatters.k=e=>e==null?"undefined":e.toString();function vn(e){return Object.assign((0,Fe.default)(e),{error:(0,Fe.default)(`${e}:error`),trace:(0,Fe.default)(`${e}:trace`)})}var xt=R(Cn(),1);var of=R(Vs(),1),sf=of.default;var af=Ht,b0=Gt,Ks=function(e){let t=0;if(e=e.toString().trim(),af(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(b0(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=af(r[n]),i;s&&(i=Ks(r[n]),r[n]=T(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,T(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(t+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);o[t++]=s>>8&255,o[t++]=s&255}return o}throw new Error("invalid ip address")},cf=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let o=[];for(let s=0;s<r;s++)o.push(e[t+s]);return o.join(".")}if(r===16){let o=[];for(let s=0;s<r;s+=2)o.push(n.getUint16(t+s).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Ur={},Xs={},S0=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];S0.forEach(e=>{let t=E0(...e);Xs[t.code]=t,Ur[t.name]=t});function E0(e,t,r,n,o){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(o)}}function q(e){if(typeof e=="number"){if(Xs[e]!=null)return Xs[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Ur[e]!=null)return Ur[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var ze=R(bt(),1);function Ef(e,t){switch(q(e).code){case 4:case 41:return L0(t);case 42:return xf(t);case 6:case 273:case 33:case 132:return Tf(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return xf(t);case 421:return j0(t);case 444:return Sf(t);case 445:return Sf(t);case 466:return $0(t);default:return T(t,"base16")}}function vf(e,t){switch(q(e).code){case 4:return wf(t);case 41:return wf(t);case 42:return bf(t);case 6:case 273:case 33:case 132:return ei(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return bf(t);case 421:return F0(t);case 444:return M0(t);case 445:return V0(t);case 466:return z0(t);default:return re(t,"base16")}}var Ys=Object.values(Ee).map(e=>e.decoder),O0=function(){let e=Ys[0].or(Ys[1]);return Ys.slice(2).forEach(t=>e=e.or(t)),e}();function wf(e){if(!ve(e))throw new Error("invalid ip address");return Ks(e)}function L0(e){let t=cf(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!ve(t))throw new Error("invalid ip address");return t}function ei(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Tf(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function bf(e){let t=re(e),r=Uint8Array.from(ze.default.encode(t.length));return L([r,t],r.length+t.length)}function xf(e){let t=ze.default.decode(e);if(e=e.slice(ze.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return T(e)}function F0(e){let t;e[0]==="Q"||e[0]==="1"?t=qe(V.decode(`z${e}`)).bytes:t=h.parse(e).multihash.bytes;let r=Uint8Array.from(ze.default.encode(t.length));return L([r,t],r.length+t.length)}function z0(e){let t=O0.decode(e),r=Uint8Array.from(ze.default.encode(t.length));return L([r,t],r.length+t.length)}function $0(e){let t=ze.default.decode(e),r=e.slice(ze.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+T(r,"base64url")}function j0(e){let t=ze.default.decode(e),r=e.slice(ze.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return T(r,"base58btc")}function M0(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=le.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=ei(n);return L([r,o],r.length+o.length)}function V0(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=le.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=ei(n);return L([r,o],r.length+o.length)}function Sf(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=T(t,"base32"),o=Tf(r);return`${n}:${o}`}var Yt=R(bt(),1);function q0(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let o=r[n],s=q(o);if(s.size===0){t.push([o]);continue}if(n++,n>=r.length)throw Pf("invalid address: "+e);if(s.path===!0){t.push([o,si(r.slice(n).join("/"))]);break}t.push([o,r[n]])}return t}function H0(e){let t=[];return e.map(r=>{let n=kn(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),si(t.join("/"))}function G0(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=kn(t);return t.length>1?[r.code,vf(r.code,t[1])]:[r.code]})}function ti(e){return e.map(t=>{let r=kn(t);return t[1]!=null?[r.code,Ef(r.code,t[1])]:[r.code]})}function ri(e){return Un(L(e.map(t=>{let r=kn(t),n=Uint8Array.from(Yt.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=L([n,t[1]])),n})))}function ni(e,t){return e.size>0?e.size/8:e.size===0?0:Yt.default.decode(t)+(Yt.default.decode.bytes??0)}function In(e){let t=[],r=0;for(;r<e.length;){let n=Yt.default.decode(e,r),o=Yt.default.decode.bytes??0,s=q(n),i=ni(s,e.slice(r+o));if(i===0){t.push([n]),r+=o;continue}let a=e.slice(r+o,r+o+i);if(r+=i+o,r>e.length)throw Pf("Invalid address Uint8Array: "+T(e,"base16"));t.push([n,a])}return t}function oi(e){let t=In(e),r=ti(t);return H0(r)}function W0(e){e=si(e);let t=q0(e),r=G0(t);return ri(r)}function Af(e){return W0(e)}function Un(e){let t=J0(e);if(t!=null)throw t;return Uint8Array.from(e)}function J0(e){try{In(e)}catch(t){return t}}function si(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function Pf(e){return new Error("Error parsing address: "+e)}function kn(e){return q(e[0])}var ai=R(bt(),1);var kf=R(ue(),1);var er=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},ii=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},kr,Br,Nr,Uf,Q0=Symbol.for("nodejs.util.inspect.custom"),Z0=[q("dns").code,q("dns4").code,q("dns6").code,q("dnsaddr").code],Y0=new Map,Bf=Symbol.for("@multiformats/js-multiaddr/multiaddr");function e1(e){return Boolean(e?.[Bf])}var Xe=class{constructor(t){if(kr.set(this,void 0),Br.set(this,void 0),Nr.set(this,void 0),this[Uf]=!0,t==null&&(t=""),t instanceof Uint8Array)this.bytes=Un(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=Af(t)}else if(e1(t))this.bytes=Un(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return er(this,kr,"f")==null&&ii(this,kr,oi(this.bytes),"f"),er(this,kr,"f")}toJSON(){return this.toString()}toOptions(){let t,r,n,o,s="",i=q("tcp"),a=q("udp"),c=q("ip4"),u=q("ip6"),d=q("dns6"),m=q("ip6zone");for(let[S,w]of this.stringTuples())S===m.code&&(s=`%${w??""}`),Z0.includes(S)&&(r=i.name,o=443,n=`${w??""}${s}`,t=S===d.code?6:4),(S===i.code||S===a.code)&&(r=q(S).name,o=parseInt(w??"")),(S===c.code||S===u.code)&&(r=q(S).name,n=`${w??""}${s}`,t=S===u.code?6:4);if(t==null||r==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:o}}protos(){return this.protoCodes().map(t=>Object.assign({},q(t)))}protoCodes(){let t=[],r=this.bytes,n=0;for(;n<r.length;){let o=ai.default.decode(r,n),s=ai.default.decode.bytes??0,i=q(o),a=ni(i,r.slice(n+s));n+=a+s,t.push(o)}return t}protoNames(){return this.protos().map(t=>t.name)}tuples(){return er(this,Br,"f")==null&&ii(this,Br,In(this.bytes),"f"),er(this,Br,"f")}stringTuples(){return er(this,Nr,"f")==null&&ii(this,Nr,ti(this.tuples()),"f"),er(this,Nr,"f")}encapsulate(t){return t=new Xe(t),new Xe(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Xe(n.slice(0,o))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new Xe(ri(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===Ur.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?T(V.decode(`z${n}`),"base58btc"):T(h.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let t=null;try{t=this.stringTuples().filter(r=>q(r[0]).path===!0)[0][1],t==null&&(t=null)}catch{t=null}return t}equals(t){return Ke(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=Y0.get(r.name);if(n==null)throw(0,kf.default)(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(s=>new Xe(s))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(kr=new WeakMap,Br=new WeakMap,Nr=new WeakMap,Uf=Bf,Q0)](){return`Multiaddr(${oi(this.bytes)})`}};function Nf(e){return new Xe(e)}var Df=Ht,t1=Gt,ci=function(e){let t=0;if(e=e.toString().trim(),Df(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(t1(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=Df(r[n]),i;s&&(i=ci(r[n]),r[n]=T(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,T(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(t+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);o[t++]=s>>8&255,o[t++]=s&255}return o}throw new Error("invalid ip address")},_f=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let o=[];for(let s=0;s<r;s++)o.push(e[t+s]);return o.join(".")}if(r===16){let o=[];for(let s=0;s<r;s+=2)o.push(n.getUint16(t+s).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Dr={},ui={},n1=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];n1.forEach(e=>{let t=o1(...e);ui[t.code]=t,Dr[t.name]=t});function o1(e,t,r,n,o){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(o)}}function H(e){if(typeof e=="number"){if(ui[e]!=null)return ui[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Dr[e]!=null)return Dr[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var $e=R(bt(),1);function zf(e,t){switch(H(e).code){case 4:case 41:return i1(t);case 42:return Lf(t);case 6:case 273:case 33:case 132:return jf(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Lf(t);case 421:return f1(t);case 444:return Ff(t);case 445:return Ff(t);case 466:return u1(t);default:return T(t,"base16")}}function $f(e,t){switch(H(e).code){case 4:return Rf(t);case 41:return Rf(t);case 42:return Of(t);case 6:case 273:case 33:case 132:return li(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Of(t);case 421:return a1(t);case 444:return l1(t);case 445:return p1(t);case 466:return c1(t);default:return re(t,"base16")}}var fi=Object.values(Ee).map(e=>e.decoder),s1=function(){let e=fi[0].or(fi[1]);return fi.slice(2).forEach(t=>e=e.or(t)),e}();function Rf(e){if(!ve(e))throw new Error("invalid ip address");return ci(e)}function i1(e){let t=_f(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!ve(t))throw new Error("invalid ip address");return t}function li(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function jf(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Of(e){let t=re(e),r=Uint8Array.from($e.default.encode(t.length));return L([r,t],r.length+t.length)}function Lf(e){let t=$e.default.decode(e);if(e=e.slice($e.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return T(e)}function a1(e){let t;e[0]==="Q"||e[0]==="1"?t=qe(V.decode(`z${e}`)).bytes:t=h.parse(e).multihash.bytes;let r=Uint8Array.from($e.default.encode(t.length));return L([r,t],r.length+t.length)}function c1(e){let t=s1.decode(e),r=Uint8Array.from($e.default.encode(t.length));return L([r,t],r.length+t.length)}function u1(e){let t=$e.default.decode(e),r=e.slice($e.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+T(r,"base64url")}function f1(e){let t=$e.default.decode(e),r=e.slice($e.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return T(r,"base58btc")}function l1(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=le.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=li(n);return L([r,o],r.length+o.length)}function p1(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=le.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=li(n);return L([r,o],r.length+o.length)}function Ff(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=T(t,"base32"),o=jf(r);return`${n}:${o}`}var tr=R(bt(),1);function d1(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let o=r[n],s=H(o);if(s.size===0){t.push([o]);continue}if(n++,n>=r.length)throw Vf("invalid address: "+e);if(s.path===!0){t.push([o,gi(r.slice(n).join("/"))]);break}t.push([o,r[n]])}return t}function h1(e){let t=[];return e.map(r=>{let n=Dn(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),gi(t.join("/"))}function m1(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=Dn(t);return t.length>1?[r.code,$f(r.code,t[1])]:[r.code]})}function pi(e){return e.map(t=>{let r=Dn(t);return t[1]!=null?[r.code,zf(r.code,t[1])]:[r.code]})}function di(e){return Nn(L(e.map(t=>{let r=Dn(t),n=Uint8Array.from(tr.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=L([n,t[1]])),n})))}function hi(e,t){return e.size>0?e.size/8:e.size===0?0:tr.default.decode(t)+(tr.default.decode.bytes??0)}function Bn(e){let t=[],r=0;for(;r<e.length;){let n=tr.default.decode(e,r),o=tr.default.decode.bytes??0,s=H(n),i=hi(s,e.slice(r+o));if(i===0){t.push([n]),r+=o;continue}let a=e.slice(r+o,r+o+i);if(r+=i+o,r>e.length)throw Vf("Invalid address Uint8Array: "+T(e,"base16"));t.push([n,a])}return t}function mi(e){let t=Bn(e),r=pi(t);return h1(r)}function g1(e){e=gi(e);let t=d1(e),r=m1(t);return di(r)}function Mf(e){return g1(e)}function Nn(e){let t=y1(e);if(t!=null)throw t;return Uint8Array.from(e)}function y1(e){try{Bn(e)}catch(t){return t}}function gi(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function Vf(e){return new Error("Error parsing address: "+e)}function Dn(e){return H(e[0])}var wi=R(bt(),1);var Hf=R(ue(),1);var rr=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},yi=function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},_r,Rr,Or,qf,b1=Symbol.for("nodejs.util.inspect.custom"),x1=[H("dns").code,H("dns4").code,H("dns6").code,H("dnsaddr").code],S1=new Map,Gf=Symbol.for("@multiformats/js-multiaddr/multiaddr");function E1(e){return Boolean(e?.[Gf])}var Qe=class{constructor(t){if(_r.set(this,void 0),Rr.set(this,void 0),Or.set(this,void 0),this[qf]=!0,t==null&&(t=""),t instanceof Uint8Array)this.bytes=Nn(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=Mf(t)}else if(E1(t))this.bytes=Nn(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return rr(this,_r,"f")==null&&yi(this,_r,mi(this.bytes),"f"),rr(this,_r,"f")}toJSON(){return this.toString()}toOptions(){let t,r,n,o,s="",i=H("tcp"),a=H("udp"),c=H("ip4"),u=H("ip6"),d=H("dns6"),m=H("ip6zone");for(let[S,w]of this.stringTuples())S===m.code&&(s=`%${w??""}`),x1.includes(S)&&(r=i.name,o=443,n=`${w??""}${s}`,t=S===d.code?6:4),(S===i.code||S===a.code)&&(r=H(S).name,o=parseInt(w??"")),(S===c.code||S===u.code)&&(r=H(S).name,n=`${w??""}${s}`,t=S===u.code?6:4);if(t==null||r==null||n==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:o}}protos(){return this.protoCodes().map(t=>Object.assign({},H(t)))}protoCodes(){let t=[],r=this.bytes,n=0;for(;n<r.length;){let o=wi.default.decode(r,n),s=wi.default.decode.bytes??0,i=H(o),a=hi(i,r.slice(n+s));n+=a+s,t.push(o)}return t}protoNames(){return this.protos().map(t=>t.name)}tuples(){return rr(this,Rr,"f")==null&&yi(this,Rr,Bn(this.bytes),"f"),rr(this,Rr,"f")}stringTuples(){return rr(this,Or,"f")==null&&yi(this,Or,pi(this.tuples()),"f"),rr(this,Or,"f")}encapsulate(t){return t=new Qe(t),new Qe(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Qe(n.slice(0,o))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new Qe(di(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===Dr.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?T(V.decode(`z${n}`),"base58btc"):T(h.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let t=null;try{t=this.stringTuples().filter(r=>H(r[0]).path===!0)[0][1],t==null&&(t=null)}catch{t=null}return t}equals(t){return Ke(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=S1.get(r.name);if(n==null)throw(0,Hf.default)(new Error(`no available resolver for ${r.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(s=>new Qe(s))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(_r=new WeakMap,Rr=new WeakMap,Or=new WeakMap,qf=Gf,b1)](){return`Multiaddr(${mi(this.bytes)})`}};function Wf(e){return new Qe(e)}var _n=(e,t)=>t,v1=(e,t,r,n)=>{if(n!=null&&n.assumeHttp===!1)return`tcp://${e}:${t}`;let o="tcp",s=`:${t}`;return r[r.length-1].protocol==="tcp"&&(o=t==="443"?"https":"http",s=t==="443"||t==="80"?"":s),`${o}://${e}${s}`},T1={ip4:_n,ip6:(e,t,r,n)=>n.length===1&&n[0].protocol==="ip6"?t:`[${t}]`,tcp:(e,t,r,n,o)=>n.some(s=>["http","https","ws","wss"].includes(s.protocol))?`${e}:${t}`:v1(e,t,n,o),udp:(e,t)=>`udp://${e}:${t}`,dnsaddr:_n,dns4:_n,dns6:_n,ipfs:(e,t)=>`${e}/ipfs/${t}`,p2p:(e,t)=>`${e}/p2p/${t}`,http:e=>`http://${e}`,https:e=>`https://${e}`,ws:e=>`ws://${e}`,wss:e=>`wss://${e}`,"p2p-websocket-star":e=>`${e}/p2p-websocket-star`,"p2p-webrtc-star":e=>`${e}/p2p-webrtc-star`,"p2p-webrtc-direct":e=>`${e}/p2p-webrtc-direct`};function Jf(e,t){let r=Wf(e),n=r.toString().split("/").slice(1);return r.tuples().map(o=>({protocol:n.shift()??"",content:o[1]!=null?n.shift()??"":""})).reduce((o,s,i,a)=>{let c=T1[s.protocol];if(c==null)throw new Error(`Unsupported protocol ${s.protocol}`);return c(o,s.content,i,a,t)},"")}function bi(e){try{e=Jf(Nf(e))}catch{}return e=e.toString(),e}var Kf=()=>{};var Xf=vn("js-kubo-rpc-client:lib:error-handler"),A1=sf.bind({ignoreUndefined:!0}),P1=je.isBrowser||je.isWebWorker?location.protocol:"http",C1=je.isBrowser||je.isWebWorker?location.hostname:"localhost",I1=je.isBrowser||je.isWebWorker?location.port:"5001",U1=(e={})=>{let t,r={},n;if(typeof e=="string"||Ar(e))t=new URL(bi(e));else if(e instanceof URL)t=e;else if(typeof e.url=="string"||Ar(e.url))t=new URL(bi(e.url)),r=e;else if(e.url instanceof URL)t=e.url,r=e;else{r=e||{};let o=(r.protocol||P1).replace(":",""),s=(r.host||C1).split(":")[0],i=r.port||I1;t=new URL(`${o}://${s}:${i}`)}if(r.apiPath?t.pathname=r.apiPath:(t.pathname==="/"||t.pathname===void 0)&&(t.pathname="api/v0"),je.isNode){let o=Kf(t);n=r.agent||new o({keepAlive:!0,maxSockets:6})}return{...r,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:n}},k1=async e=>{let t;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){let n=await e.json();Xf(n),t=n.Message||n.message}else t=await e.text()}catch(n){Xf("Failed to parse error response",n),t=n.message}let r=new xt.default.HTTPError(e);throw t&&(t.includes("deadline has elapsed")&&(r=new xt.default.TimeoutError),t&&t.includes("context deadline exceeded")&&(r=new xt.default.TimeoutError)),t&&t.includes("request timed out")&&(r=new xt.default.TimeoutError),t&&(r.message=t),r},B1=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Qf=e=>e.replace(B1,function(t){return"-"+t.toLowerCase()}),N1=e=>typeof e=="string"?Su(e):e,ft=class extends xt.default{constructor(t={}){let r=U1(t);super({timeout:N1(r.timeout||0)||void 0,headers:r.headers,base:`${r.url}`,handleError:k1,transformSearchParams:o=>{let s=new URLSearchParams;for(let[i,a]of o)a!=="undefined"&&a!=="null"&&i!=="signal"&&s.append(Qf(i),a),i==="timeout"&&!isNaN(a)&&s.append(Qf(i),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=(o,s={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${r.url}/${o}`),n.call(this,o,A1(s,{method:"POST"})))}},N8=xt.default.HTTPError;var f=e=>t=>e(new ft(t),t);function Rn(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}var Zf=R(ue(),1);function On(e){if(e==null)return;let t;if(e.secs!=null&&(t={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){let r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:(r-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw(0,Zf.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}function l({arg:e,searchParams:t,hashAlg:r,mtime:n,mode:o,...s}={}){t&&(s={...s,...t}),r&&(s.hash=r),n!=null&&(n=On(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),o!=null&&(s.mode=Rn(o)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);let i=new URLSearchParams(s);return e.forEach(a=>i.append("arg",a)),i}var Yf=f(e=>{async function t(r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:l(r),headers:r.headers})).json()).Keys||[]).map(o=>h.parse(o["/"]))}return t});var el=f(e=>{async function t(r,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:l({...n,peer:r.toString()}),headers:n.headers})).json()).Keys||[]).map(s=>h.parse(s["/"]))}return t});var D1=R(ue(),1);var tl=Symbol.for("@libp2p/peer-id");var _1=Symbol.for("nodejs.util.inspect.custom"),rl=Object.values(Ee).map(e=>e.decoder).reduce((e,t)=>e.or(t),Ee.identity.decoder),nl=114,ol=36,sl=37,Lr=class{constructor(t){this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[tl](){return!0}toString(){return this.string==null&&(this.string=V.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return h.createV1(nl,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(t instanceof Uint8Array)return Ke(this.multihash.bytes,t);if(typeof t=="string")return Y(t).equals(this);if(t?.multihash?.bytes!=null)return Ke(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[_1](){return`PeerId(${this.toString()})`}},Fr=class extends Lr{constructor(t){super({...t,type:"RSA"}),this.type="RSA",this.publicKey=t.publicKey}},zr=class extends Lr{constructor(t){super({...t,type:"Ed25519"}),this.type="Ed25519",this.publicKey=t.multihash.digest}},$r=class extends Lr{constructor(t){super({...t,type:"secp256k1"}),this.type="secp256k1",this.publicKey=t.multihash.digest}};function Y(e,t){if(t=t??rl,e.charAt(0)==="1"||e.charAt(0)==="Q"){let r=qe(V.decode(`z${e}`));return e.startsWith("12D")?new zr({multihash:r}):e.startsWith("16U")?new $r({multihash:r}):new Fr({multihash:r})}return R1(rl.decode(e))}function R1(e){try{let t=qe(e);if(t.code===mt.code){if(t.digest.length===ol)return new zr({multihash:t});if(t.digest.length===sl)return new $r({multihash:t})}if(t.code===dn.code)return new Fr({multihash:t})}catch{return O1(h.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function O1(e){if(e==null||e.multihash==null||e.version==null||e.version===1&&e.code!==nl)throw new Error("Supplied PeerID CID is invalid");let t=e.multihash;if(t.code===dn.code)return new Fr({multihash:e.multihash});if(t.code===mt.code){if(t.digest.length===ol)return new zr({multihash:e.multihash});if(t.digest.length===sl)return new $r({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}var Ln=f(e=>{async function t(r={}){let n=await e.post("bitswap/stat",{searchParams:l(r),signal:r.signal,headers:r.headers});return L1(await n.json())}return t});function L1(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map(t=>h.parse(t["/"])),peers:(e.Peers||[]).map(t=>Y(t)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function il(e){return{wantlist:Yf(e),wantlistForPeer:el(e),stat:Ln(e)}}var Fn=f(e=>{async function t(r,n={}){let o=await e.post("block/get",{signal:n.signal,searchParams:l({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}return t});var cl=R(ue(),1);function Ze(e){let[t,r]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}async function*Te(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}async function jr(e){let t=[];for await(let r of e)t.push(r);return t}function Ae(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Ye(e){return e.constructor&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function Mr(e){return typeof e=="object"&&(e.path||e.content)}var et=e=>e&&typeof e.getReader=="function";async function ul(e){if(Ae(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(Ye(e))return e;if(et(e)&&(e=Te(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let t=Ze(e),{value:r,done:n}=await t.peek();if(n)return al(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await jr(t))]);if(Ae(r)||typeof r=="string"||r instanceof String)return al(t)}throw(0,cl.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function al(e){let t=[];for await(let r of e)t.push(r);return new Blob(t)}var Gr=R(ue(),1);async function*nr(e,t){for await(let r of e)yield t(r)}var ap=R(ue(),1);var tt=R(ip(),1),sr=tt.default.Reader,Di=tt.default.Writer,v=tt.default.util,ie=tt.default.roots["ipfs-unixfs"]||(tt.default.roots["ipfs-unixfs"]={}),W1=ie.Data=(()=>{function e(t){if(this.blocksizes=[],t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=v.newBuffer([]),e.prototype.filesize=v.Long?v.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=v.emptyArray,e.prototype.hashType=v.Long?v.Long.fromBits(0,0,!0):0,e.prototype.fanout=v.Long?v.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(r,n){if(n||(n=Di.create()),n.uint32(8).int32(r.Type),r.Data!=null&&Object.hasOwnProperty.call(r,"Data")&&n.uint32(18).bytes(r.Data),r.filesize!=null&&Object.hasOwnProperty.call(r,"filesize")&&n.uint32(24).uint64(r.filesize),r.blocksizes!=null&&r.blocksizes.length)for(var o=0;o<r.blocksizes.length;++o)n.uint32(32).uint64(r.blocksizes[o]);return r.hashType!=null&&Object.hasOwnProperty.call(r,"hashType")&&n.uint32(40).uint64(r.hashType),r.fanout!=null&&Object.hasOwnProperty.call(r,"fanout")&&n.uint32(48).uint64(r.fanout),r.mode!=null&&Object.hasOwnProperty.call(r,"mode")&&n.uint32(56).uint32(r.mode),r.mtime!=null&&Object.hasOwnProperty.call(r,"mtime")&&ie.UnixTime.encode(r.mtime,n.uint32(66).fork()).ldelim(),n},e.decode=function(r,n){r instanceof sr||(r=sr.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new ie.Data;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;case 3:s.filesize=r.uint64();break;case 4:if(s.blocksizes&&s.blocksizes.length||(s.blocksizes=[]),(i&7)===2)for(var a=r.uint32()+r.pos;r.pos<a;)s.blocksizes.push(r.uint64());else s.blocksizes.push(r.uint64());break;case 5:s.hashType=r.uint64();break;case 6:s.fanout=r.uint64();break;case 7:s.mode=r.uint32();break;case 8:s.mtime=ie.UnixTime.decode(r,r.uint32());break;default:r.skipType(i&7);break}}if(!s.hasOwnProperty("Type"))throw v.ProtocolError("missing required 'Type'",{instance:s});return s},e.fromObject=function(r){if(r instanceof ie.Data)return r;var n=new ie.Data;switch(r.Type){case"Raw":case 0:n.Type=0;break;case"Directory":case 1:n.Type=1;break;case"File":case 2:n.Type=2;break;case"Metadata":case 3:n.Type=3;break;case"Symlink":case 4:n.Type=4;break;case"HAMTShard":case 5:n.Type=5;break}if(r.Data!=null&&(typeof r.Data=="string"?v.base64.decode(r.Data,n.Data=v.newBuffer(v.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),r.filesize!=null&&(v.Long?(n.filesize=v.Long.fromValue(r.filesize)).unsigned=!0:typeof r.filesize=="string"?n.filesize=parseInt(r.filesize,10):typeof r.filesize=="number"?n.filesize=r.filesize:typeof r.filesize=="object"&&(n.filesize=new v.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0))),r.blocksizes){if(!Array.isArray(r.blocksizes))throw TypeError(".Data.blocksizes: array expected");n.blocksizes=[];for(var o=0;o<r.blocksizes.length;++o)v.Long?(n.blocksizes[o]=v.Long.fromValue(r.blocksizes[o])).unsigned=!0:typeof r.blocksizes[o]=="string"?n.blocksizes[o]=parseInt(r.blocksizes[o],10):typeof r.blocksizes[o]=="number"?n.blocksizes[o]=r.blocksizes[o]:typeof r.blocksizes[o]=="object"&&(n.blocksizes[o]=new v.LongBits(r.blocksizes[o].low>>>0,r.blocksizes[o].high>>>0).toNumber(!0))}if(r.hashType!=null&&(v.Long?(n.hashType=v.Long.fromValue(r.hashType)).unsigned=!0:typeof r.hashType=="string"?n.hashType=parseInt(r.hashType,10):typeof r.hashType=="number"?n.hashType=r.hashType:typeof r.hashType=="object"&&(n.hashType=new v.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0))),r.fanout!=null&&(v.Long?(n.fanout=v.Long.fromValue(r.fanout)).unsigned=!0:typeof r.fanout=="string"?n.fanout=parseInt(r.fanout,10):typeof r.fanout=="number"?n.fanout=r.fanout:typeof r.fanout=="object"&&(n.fanout=new v.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0))),r.mode!=null&&(n.mode=r.mode>>>0),r.mtime!=null){if(typeof r.mtime!="object")throw TypeError(".Data.mtime: object expected");n.mtime=ie.UnixTime.fromObject(r.mtime)}return n},e.toObject=function(r,n){n||(n={});var o={};if((n.arrays||n.defaults)&&(o.blocksizes=[]),n.defaults){if(o.Type=n.enums===String?"Raw":0,n.bytes===String?o.Data="":(o.Data=[],n.bytes!==Array&&(o.Data=v.newBuffer(o.Data))),v.Long){var s=new v.Long(0,0,!0);o.filesize=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.filesize=n.longs===String?"0":0;if(v.Long){var s=new v.Long(0,0,!0);o.hashType=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.hashType=n.longs===String?"0":0;if(v.Long){var s=new v.Long(0,0,!0);o.fanout=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.fanout=n.longs===String?"0":0;o.mode=0,o.mtime=null}if(r.Type!=null&&r.hasOwnProperty("Type")&&(o.Type=n.enums===String?ie.Data.DataType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(o.Data=n.bytes===String?v.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),r.filesize!=null&&r.hasOwnProperty("filesize")&&(typeof r.filesize=="number"?o.filesize=n.longs===String?String(r.filesize):r.filesize:o.filesize=n.longs===String?v.Long.prototype.toString.call(r.filesize):n.longs===Number?new v.LongBits(r.filesize.low>>>0,r.filesize.high>>>0).toNumber(!0):r.filesize),r.blocksizes&&r.blocksizes.length){o.blocksizes=[];for(var i=0;i<r.blocksizes.length;++i)typeof r.blocksizes[i]=="number"?o.blocksizes[i]=n.longs===String?String(r.blocksizes[i]):r.blocksizes[i]:o.blocksizes[i]=n.longs===String?v.Long.prototype.toString.call(r.blocksizes[i]):n.longs===Number?new v.LongBits(r.blocksizes[i].low>>>0,r.blocksizes[i].high>>>0).toNumber(!0):r.blocksizes[i]}return r.hashType!=null&&r.hasOwnProperty("hashType")&&(typeof r.hashType=="number"?o.hashType=n.longs===String?String(r.hashType):r.hashType:o.hashType=n.longs===String?v.Long.prototype.toString.call(r.hashType):n.longs===Number?new v.LongBits(r.hashType.low>>>0,r.hashType.high>>>0).toNumber(!0):r.hashType),r.fanout!=null&&r.hasOwnProperty("fanout")&&(typeof r.fanout=="number"?o.fanout=n.longs===String?String(r.fanout):r.fanout:o.fanout=n.longs===String?v.Long.prototype.toString.call(r.fanout):n.longs===Number?new v.LongBits(r.fanout.low>>>0,r.fanout.high>>>0).toNumber(!0):r.fanout),r.mode!=null&&r.hasOwnProperty("mode")&&(o.mode=r.mode),r.mtime!=null&&r.hasOwnProperty("mtime")&&(o.mtime=ie.UnixTime.toObject(r.mtime,n)),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,tt.default.util.toJSONOptions)},e.DataType=function(){let t={},r=Object.create(t);return r[t[0]="Raw"]=0,r[t[1]="Directory"]=1,r[t[2]="File"]=2,r[t[3]="Metadata"]=3,r[t[4]="Symlink"]=4,r[t[5]="HAMTShard"]=5,r}(),e})(),Vv=ie.UnixTime=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Seconds=v.Long?v.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(r,n){return n||(n=Di.create()),n.uint32(8).int64(r.Seconds),r.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(r,"FractionalNanoseconds")&&n.uint32(21).fixed32(r.FractionalNanoseconds),n},e.decode=function(r,n){r instanceof sr||(r=sr.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new ie.UnixTime;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.Seconds=r.int64();break;case 2:s.FractionalNanoseconds=r.fixed32();break;default:r.skipType(i&7);break}}if(!s.hasOwnProperty("Seconds"))throw v.ProtocolError("missing required 'Seconds'",{instance:s});return s},e.fromObject=function(r){if(r instanceof ie.UnixTime)return r;var n=new ie.UnixTime;return r.Seconds!=null&&(v.Long?(n.Seconds=v.Long.fromValue(r.Seconds)).unsigned=!1:typeof r.Seconds=="string"?n.Seconds=parseInt(r.Seconds,10):typeof r.Seconds=="number"?n.Seconds=r.Seconds:typeof r.Seconds=="object"&&(n.Seconds=new v.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber())),r.FractionalNanoseconds!=null&&(n.FractionalNanoseconds=r.FractionalNanoseconds>>>0),n},e.toObject=function(r,n){n||(n={});var o={};if(n.defaults){if(v.Long){var s=new v.Long(0,0,!1);o.Seconds=n.longs===String?s.toString():n.longs===Number?s.toNumber():s}else o.Seconds=n.longs===String?"0":0;o.FractionalNanoseconds=0}return r.Seconds!=null&&r.hasOwnProperty("Seconds")&&(typeof r.Seconds=="number"?o.Seconds=n.longs===String?String(r.Seconds):r.Seconds:o.Seconds=n.longs===String?v.Long.prototype.toString.call(r.Seconds):n.longs===Number?new v.LongBits(r.Seconds.low>>>0,r.Seconds.high>>>0).toNumber():r.Seconds),r.FractionalNanoseconds!=null&&r.hasOwnProperty("FractionalNanoseconds")&&(o.FractionalNanoseconds=r.FractionalNanoseconds),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,tt.default.util.toJSONOptions)},e})(),qv=ie.Metadata=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.MimeType="",e.encode=function(r,n){return n||(n=Di.create()),r.MimeType!=null&&Object.hasOwnProperty.call(r,"MimeType")&&n.uint32(10).string(r.MimeType),n},e.decode=function(r,n){r instanceof sr||(r=sr.create(r));for(var o=n===void 0?r.len:r.pos+n,s=new ie.Metadata;r.pos<o;){var i=r.uint32();switch(i>>>3){case 1:s.MimeType=r.string();break;default:r.skipType(i&7);break}}return s},e.fromObject=function(r){if(r instanceof ie.Metadata)return r;var n=new ie.Metadata;return r.MimeType!=null&&(n.MimeType=String(r.MimeType)),n},e.toObject=function(r,n){n||(n={});var o={};return n.defaults&&(o.MimeType=""),r.MimeType!=null&&r.hasOwnProperty("MimeType")&&(o.MimeType=r.MimeType),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,tt.default.util.toJSONOptions)},e})();var Hv=parseInt("0644",8),Gv=parseInt("0755",8);function Vn(e){if(e!=null)return typeof e=="number"?e&4095:(e=e.toString(),e.substring(0,1)==="0"?parseInt(e,8)&4095:parseInt(e,10)&4095)}function qn(e){if(e==null)return;let t;if(e.secs!=null&&(t={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){let r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:(r-n*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw(0,ap.default)(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}async function*cp(e,t){if(typeof e=="string"||e instanceof String||Ae(e)||Ye(e)||e._readableState)throw(0,Gr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(et(e)&&(e=Te(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=Ze(e),{value:n,done:o}=await r.peek();if(o){yield*[];return}if(r.push(n),Number.isInteger(n))throw(0,Gr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*nr(r,s=>_i({content:s},t));return}if(Ae(n)){yield _i({content:r},t);return}if(Mr(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||et(n)||Ye(n)){yield*nr(r,s=>_i(s,t));return}}throw Mr(e)?(0,Gr.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,Gr.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function _i(e,t){let{path:r,mode:n,mtime:o,content:s}=e,i={path:r||"",mode:Vn(n),mtime:qn(o)};return s?i.content=await t(s):r||(i.content=await t(e)),i}function up(e){return cp(e,ul,!0)}function fp(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function ee(e,t,r={}){let n=[],o=new FormData,s=0,i=0;for await(let{content:a,path:c,mode:u,mtime:d}of up(e)){let m="",x=a?"file":"dir";s>0&&(m=`-${s}`);let S=x+m,w=[];if(u!=null&&w.push(`mode=${fp(u)}`),d!=null){let{secs:A,nsecs:B}=d;w.push(`mtime=${A}`),B!=null&&w.push(`mtime-nsecs=${B}`)}if(w.length&&(S=`${S}?${w.join("&")}`),a){o.set(S,a,c!=null?encodeURIComponent(c):void 0);let A=i+a.size;n.push({name:c,start:i,end:A}),i=A}else if(c!=null)o.set(S,new File([""],encodeURIComponent(c),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");s++}return{total:i,parts:n,headers:r,body:o}}var lp=R(Ws(),1);function K1(e){return e.filter(Boolean)}function te(...e){return(0,lp.anySignal)(K1(e))}var pp=f((e,t)=>{async function r(n,o={}){let s=new AbortController,i=te(s.signal,o.signal),a;try{a=await(await e.post("block/put",{signal:i,searchParams:l(o),...await ee([n],s,o.headers)})).json()}catch(c){if(o.format==="dag-pb")return r(n,{...o,format:"protobuf"});if(o.format==="dag-cbor")return r(n,{...o,format:"cbor"});throw c}return h.parse(a.Key)}return r});var dp=f(e=>{async function*t(r,n={}){Array.isArray(r)||(r=[r]);let o=await e.post("block/rm",{signal:n.signal,searchParams:l({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield X1(s)}return t});function X1(e){let t={cid:h.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}var hp=f(e=>{async function t(r,n={}){let s=await(await e.post("block/stat",{signal:n.signal,searchParams:l({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:h.parse(s.Key),size:s.Size}}return t});function mp(e){return{get:Fn(e),put:pp(e),rm:dp(e),stat:hp(e)}}var gp=f(e=>{async function t(r,n={}){let o=await e.post("bootstrap/add",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>X(i))}}return t});var yp=f(e=>{async function t(r={}){let n=await e.post("bootstrap/list",{signal:r.signal,searchParams:l(r),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>X(s))}}return t});var wp=f(e=>{async function t(r,n={}){let o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>X(i))}}return t});function bp(e){return{add:gp(e),list:yp(e),rm:wp(e)}}var xp=f(e=>{async function t(r,n={}){let s=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}return t});function Sp(e){return{apply:xp(e)}}var Ep=f(e=>async(r,n={})=>{if(!r)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers})).json()).Value});var vp=f(e=>async(r={})=>await(await e.post("config/show",{signal:r.signal,searchParams:l({...r}),headers:r.headers})).json());var Tp=f(e=>async(r,n={})=>{let o=new AbortController,s=te(o.signal,n.signal);await(await e.post("config/replace",{signal:s,searchParams:l(n),...await ee([re(JSON.stringify(r))],o,n.headers)})).text()});var Ap=f(e=>async(r,n,o={})=>{if(typeof r!="string")throw new Error("Invalid key type");let s={...o,...Q1(r,n)};await(await e.post("config",{signal:o.signal,searchParams:l(s),headers:o.headers})).text()}),Q1=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function Pp(e){return{getAll:vp(e),get:Ep(e),set:Ap(e),replace:Tp(e),profiles:Sp(e)}}var Cp=f(e=>{async function*t(r,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:l({arg:r.toString()}),headers:n.headers})).iterator()}return t});var Ri=R(ue(),1);async function*Oi(e,t,r,n,o){let s=async u=>{let d=await r.getCodec(u.code),m=await n(u,o);return d.decode(m)},i=t.split("/").filter(Boolean),a=await s(e),c=e;for(;i.length;){let u=i.shift();if(!u)throw(0,Ri.default)(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:i.join("/")};else throw(0,Ri.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let d=h.asCID(a);d&&(c=d,a=await s(a))}yield{value:a,remainderPath:""}}async function Li(e){for await(let t of e)return t}async function rt(e){let t;for await(let r of e)t=r;return t}var Ip=R(ue(),1);var Up=(e,t)=>f((n,o)=>{let s=Fn(o);return async(a,c={})=>{if(c.path){let S=c.localResolve?await Li(Oi(a,c.path,e,s,c)):await rt(Oi(a,c.path,e,s,c));if(!S)throw(0,Ip.default)(new Error("Not found"),"ERR_NOT_FOUND");return S}let u=await e.getCodec(a.code),d=await s(a,c);return{value:u.decode(d),remainderPath:""}}})(t);var kp=f(e=>{async function*t(r,n={}){let o=new AbortController,s=te(o.signal,n.signal),{headers:i,body:a}=await ee(r,o,n.headers),c=await e.post("dag/import",{signal:s,headers:i,body:a,searchParams:l({"pin-roots":n.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":d},PinErrorMsg:m}=u;yield{root:{cid:h.parse(d),pinErrorMsg:m}}}}return t});var Hn=(e,t)=>f(n=>async(s,i={})=>{let a={storeCodec:"dag-cbor",hashAlg:"sha2-256",...i},c;if(a.inputCodec){if(!(s instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");c=s}else c=(await e.getCodec(a.storeCodec)).encode(s),a.inputCodec=a.storeCodec;let u=new AbortController,d=te(u.signal,a.signal),x=await(await n.post("dag/put",{timeout:a.timeout,signal:d,searchParams:l(a),...await ee([c],u,a.headers)})).json();return h.parse(x.Cid["/"])})(t);var Bp=f(e=>async(r,n={})=>{let s=await(await e.post("dag/resolve",{signal:n.signal,searchParams:l({arg:`${r}${n.path?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:h.parse(s.Cid["/"]),remainderPath:s.RemPath}});function Np(e,t){return{export:Cp(t),get:Up(e,t),import:kp(t),put:Hn(e,t),resolve:Bp(t)}}var Ce=e=>{if(e.Type===0)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===1)return{from:Y(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map(({ID:t,Addrs:r})=>({id:Y(t),multiaddrs:r.map(n=>X(n)),protocols:[]})),providers:(e.Responses||[]).map(({ID:t,Addrs:r})=>({id:Y(t),multiaddrs:r.map(n=>X(n)),protocols:[]}))};if(e.Type===2){let t={id:e.ID??Y(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(t={id:Y(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(r=>X(r)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===3)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===4)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:r})=>({id:Y(t),multiaddrs:r.map(n=>X(n)),protocols:[]}))};if(e.Type===5)return{name:"VALUE",type:e.Type,value:re(e.Extra,"base64pad")};if(e.Type===6){let t=e.Responses.map(({ID:r})=>Y(r));if(!t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===7)return{name:"DIALING_PEER",type:e.Type,peer:Y(e.ID)};throw new Error("Unknown DHT event type")};var Dp=f(e=>{async function*t(r,n={}){let o=await e.post("dht/findpeer",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers});for await(let s of o.ndjson())yield Ce(s)}return t});var _p=f(e=>{async function*t(r,n={}){let o=await e.post("dht/findprovs",{signal:n.signal,searchParams:l({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Ce(s)}return t});var Rp=f(e=>{async function*t(r,n={}){let o=await e.post("dht/get",{signal:n.signal,searchParams:l({arg:r instanceof Uint8Array?T(r):r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Ce(s)}return t});var Op=f(e=>{async function*t(r,n={recursive:!1}){let o=Array.isArray(r)?r:[r],s=await e.post("dht/provide",{signal:n.signal,searchParams:l({arg:o.map(i=>i.toString()),...n}),headers:n.headers});for await(let i of s.ndjson())yield Ce(i)}return t});var Lp=f(e=>{async function*t(r,n,o={}){let s=new AbortController,i=te(s.signal,o.signal),a=await e.post("dht/put",{signal:i,searchParams:l({arg:r instanceof Uint8Array?T(r):r.toString(),...o}),...await ee([n],s,o.headers)});for await(let c of a.ndjson())yield Ce(c)}return t});var Fp=f(e=>{async function*t(r,n={}){let o=await e.post("dht/query",{signal:n.signal,searchParams:l({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield Ce(s)}return t});function zp(e){return{findPeer:Dp(e),findProvs:_p(e),get:Rp(e),provide:Op(e),put:Lp(e),query:Fp(e)}}var $p=f(e=>{async function t(r={}){return(await e.post("diag/cmds",{signal:r.signal,searchParams:l(r),headers:r.headers})).json()}return t});var jp=f(e=>{async function t(r={}){return(await e.post("diag/net",{signal:r.signal,searchParams:l(r),headers:r.headers})).json()}return t});var Mp=f(e=>{async function t(r={}){return(await e.post("diag/sys",{signal:r.signal,searchParams:l(r),headers:r.headers})).json()}return t});function Vp(e){return{cmds:$p(e),net:jp(e),sys:Mp(e)}}var qp=f(e=>{async function t(r,n,o={}){let s=Array.isArray(r)?r:[r];await(await e.post("files/cp",{signal:o.signal,searchParams:l({arg:s.concat(n).map(a=>h.asCID(a)?`/ipfs/${a}`:a),...o}),headers:o.headers})).text()}return t});var Hp=f(e=>{async function t(r,n={}){if(!r||typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await e.post("files/flush",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers})).json();return h.parse(s.Cid)}return t});function I(e){if(e==null)return e;let t=/^[A-Z]+$/,r={};return Object.keys(e).reduce((n,o)=>(t.test(o)?n[o.toLowerCase()]=e[o]:t.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),r)}function Wr(e){let t=I(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}var Wp=f(e=>{async function*t(r,n={}){if(!r)throw new Error("ipfs.files.ls requires a path");let o=await e.post("files/ls",{signal:n.signal,searchParams:l({arg:h.asCID(r)?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(let s of o.ndjson())if("Entries"in s)for(let i of s.Entries||[])yield Gp(Wr(i));else yield Gp(Wr(s))}return t});function Gp(e){return e.hash&&(e.cid=h.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}var Jp=f(e=>{async function t(r,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers})).text()}return t});var Kp=f(e=>{async function t(r,n,o={}){Array.isArray(r)||(r=[r]),await(await e.post("files/mv",{signal:o.signal,searchParams:l({arg:r.concat(n),...o}),headers:o.headers})).text()}return t});var Zp=R(Qp(),1),Yp=f(e=>{async function*t(r,n={}){let o=await e.post("files/read",{signal:n.signal,searchParams:l({arg:r,count:n.length,...n}),headers:n.headers});yield*(0,Zp.default)(o.body)}return t});var ed=R(Cn(),1),td=f(e=>{async function t(r,n={}){let o=await e.post("files/rm",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers}),s=await o.text();if(s!==""){let i=new ed.default.HTTPError(o);throw i.message=s,i}}return t});var Gn=f(e=>{async function t(r,n={}){let s=await(await e.post("files/stat",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality||!1,ix(Wr(s))}return t});function ix(e){return e.cid=h.parse(e.hash),delete e.hash,e}var rd=f(e=>{async function t(r,n,o={}){let s=new AbortController,i=te(s.signal,o.signal);await(await e.post("files/write",{signal:i,searchParams:l({arg:r,streamChannels:!0,count:o.length,...o}),...await ee([{content:n,path:"arg",mode:Rn(o.mode),mtime:On(o.mtime)}],s,o.headers)})).text()}return t});function nd(e){return{cp:qp(e),flush:Hp(e),ls:Wp(e),mkdir:Jp(e),mv:Kp(e),read:Yp(e),rm:td(e),stat:Gn(e),write:rd(e)}}var od=R(ue(),1),sd=f(e=>async(r,n,o={})=>{throw(0,od.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var ax={type:"ed25519"},id=f(e=>{async function t(r,n=ax){let s=await(await e.post("key/gen",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers})).json();return I(s)}return t});var ad=f(e=>{async function t(r,n,o,s={}){let a=await(await e.post("key/import",{signal:s.signal,searchParams:l({arg:r,pem:n,password:o,...s}),headers:s.headers})).json();return I(a)}return t});var cd=f(e=>{async function t(r={}){return((await(await e.post("key/list",{signal:r.signal,searchParams:l(r),headers:r.headers})).json()).Keys||[]).map(s=>I(s))}return t});var ud=f(e=>{async function t(r,n,o={}){let s=await e.post("key/rename",{signal:o.signal,searchParams:l({arg:[r,n],...o}),headers:o.headers});return I(await s.json())}return t});var fd=f(e=>{async function t(r,n={}){let s=await(await e.post("key/rm",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers})).json();return I(s.Keys[0])}return t});function ld(e){return{export:sd(e),gen:id(e),import:ad(e),list:cd(e),rename:ud(e),rm:fd(e)}}var pd=f(e=>{async function t(r,n,o={}){let s=await e.post("log/level",{signal:o.signal,searchParams:l({arg:[r,n],...o}),headers:o.headers});return I(await s.json())}return t});var dd=f(e=>{async function t(r={}){return(await(await e.post("log/ls",{signal:r.signal,searchParams:l(r),headers:r.headers})).json()).Strings}return t});var hd=f(e=>{async function*t(r={}){yield*(await e.post("log/tail",{signal:r.signal,searchParams:l(r),headers:r.headers})).ndjson()}return t});function md(e){return{level:pd(e),ls:dd(e),tail:hd(e)}}var gd=f(e=>{async function t(r,n={}){let o=await e.post("name/publish",{signal:n.signal,searchParams:l({arg:`${r}`,...n}),headers:n.headers});return I(await o.json())}return t});var yd=f(e=>{async function*t(r,n={}){let o=await e.post("name/resolve",{signal:n.signal,searchParams:l({arg:r,stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield s.Path}return t});var wd=f(e=>{async function t(r,n={}){let o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers});return I(await o.json())}return t});var bd=f(e=>{async function t(r={}){let n=await e.post("name/pubsub/state",{signal:r.signal,searchParams:l(r),headers:r.headers});return I(await n.json())}return t});var xd=f(e=>{async function t(r={}){return(await(await e.post("name/pubsub/subs",{signal:r.signal,searchParams:l(r),headers:r.headers})).json()).Strings||[]}return t});function Sd(e){return{cancel:wd(e),state:bd(e),subs:xd(e)}}function Ed(e){return{publish:gd(e),resolve:yd(e),pubsub:Sd(e)}}var vd=f(e=>{async function t(r,n={}){let s=await(await e.post("object/data",{signal:n.signal,searchParams:l({arg:`${r instanceof Uint8Array?h.decode(r):r}`,...n}),headers:n.headers})).arrayBuffer();return new Uint8Array(s,0,s.byteLength)}return t});var Td=f(e=>{async function t(r,n={}){let s=await(await e.post("object/get",{signal:n.signal,searchParams:l({arg:`${r instanceof Uint8Array?h.decode(r):r}`,dataEncoding:"base64",...n}),headers:n.headers})).json();return{Data:re(s.Data,"base64pad"),Links:(s.Links||[]).map(i=>({Name:i.Name,Hash:h.parse(i.Hash),Tsize:i.Size}))}}return t});var Ad=f(e=>{async function t(r,n={}){return((await(await e.post("object/links",{signal:n.signal,searchParams:l({arg:`${r instanceof Uint8Array?h.decode(r):r}`,...n}),headers:n.headers})).json()).Links||[]).map(i=>({Name:i.Name,Tsize:i.Size,Hash:h.parse(i.Hash)}))}return t});var Pd=f(e=>{async function t(r={}){let n=await e.post("object/new",{signal:r.signal,searchParams:l({arg:r.template,...r}),headers:r.headers}),{Hash:o}=await n.json();return h.parse(o)}return t});var Cd=(e,t)=>f(n=>{let o=Hn(e,t);async function s(i,a={}){return o(i,{...a,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return s})(t);var Id=f(e=>{async function t(r,n={}){let s=await(await e.post("object/stat",{signal:n.signal,searchParams:l({arg:`${r}`,...n}),headers:n.headers})).json();return{...s,Hash:h.parse(s.Hash)}}return t});var Ud=f(e=>{async function t(r,n,o={}){let s=await e.post("object/patch/add-link",{signal:o.signal,searchParams:l({arg:[`${r}`,n.Name||n.name||"",(n.Hash||n.cid||"").toString()||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return h.parse(i)}return t});var kd=f(e=>{async function t(r,n,o={}){let s=new AbortController,i=te(s.signal,o.signal),a=await e.post("object/patch/append-data",{signal:i,searchParams:l({arg:`${r}`,...o}),...await ee([n],s,o.headers)}),{Hash:c}=await a.json();return h.parse(c)}return t});var Bd=f(e=>{async function t(r,n,o={}){let s=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:l({arg:[`${r}`,n.Name||n.name||null],...o}),headers:o.headers}),{Hash:i}=await s.json();return h.parse(i)}return t});var Nd=f(e=>{async function t(r,n,o={}){let s=new AbortController,i=te(s.signal,o.signal),a=await e.post("object/patch/set-data",{signal:i,searchParams:l({arg:[`${r}`],...o}),...await ee([n],s,o.headers)}),{Hash:c}=await a.json();return h.parse(c)}return t});function Dd(e){return{addLink:Ud(e),appendData:kd(e),rmLink:Bd(e),setData:Nd(e)}}function _d(e,t){return{data:vd(t),get:Td(t),links:Ad(t),new:Pd(t),put:Cd(e,t),stat:Id(t),patch:Dd(t)}}var ir=R(ue(),1);function cx(e){return Symbol.iterator in e}function ux(e){return Symbol.asyncIterator in e}function Rd(e){return h.asCID(e)!=null}async function*Wn(e){if(e==null)throw(0,ir.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");let t=h.asCID(e);if(t){yield fe({cid:t});return}if(e instanceof String||typeof e=="string"){yield fe({path:e});return}if(e.cid!=null||e.path!=null)return yield fe(e);if(cx(e)){let r=e[Symbol.iterator](),n=r.next();if(n.done)return r;if(Rd(n.value)){yield fe({cid:n.value});for(let o of r)yield fe({cid:o});return}if(n.value instanceof String||typeof n.value=="string"){yield fe({path:n.value});for(let o of r)yield fe({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield fe(n.value);for(let o of r)yield fe(o);return}throw(0,ir.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(ux(e)){let r=e[Symbol.asyncIterator](),n=await r.next();if(n.done)return r;if(Rd(n.value)){yield fe({cid:n.value});for await(let o of r)yield fe({cid:o});return}if(n.value instanceof String||typeof n.value=="string"){yield fe({path:n.value});for await(let o of r)yield fe({path:o});return}if(n.value.cid!=null||n.value.path!=null){yield fe(n.value);for await(let o of r)yield fe(o);return}throw(0,ir.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw(0,ir.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}function fe(e){let t=e.cid||`${e.path}`;if(!t)throw(0,ir.default)(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let r={path:t,recursive:e.recursive!==!1};return e.metadata!=null&&(r.metadata=e.metadata),r}var Jn=f(e=>{async function*t(r,n={}){for await(let{path:o,recursive:s,metadata:i}of Wn(r)){let a=await e.post("pin/add",{signal:n.signal,searchParams:l({...n,arg:o,recursive:s,metadata:i?JSON.stringify(i):void 0,stream:!0}),headers:n.headers});for await(let c of a.ndjson()){if(c.Pins){for(let u of c.Pins)yield h.parse(u);continue}yield h.parse(c)}}}return t});function Od(e){let t=Jn(e);return f(()=>{async function r(n,o={}){return rt(t([{path:n,...o}],o))}return r})(e)}function Ld(e,t,r){let n={type:e,cid:h.parse(t)};return r&&(n.metadata=r),n}var Fd=f(e=>{async function*t(r={}){let n=[];r.paths&&(n=Array.isArray(r.paths)?r.paths:[r.paths]);let o=await e.post("pin/ls",{signal:r.signal,searchParams:l({...r,arg:n.map(s=>`${s}`),stream:!0}),headers:r.headers});for await(let s of o.ndjson()){if(s.Keys){for(let i of Object.keys(s.Keys))yield Ld(s.Keys[i].Type,i,s.Keys[i].Metadata);return}yield Ld(s.Type,s.Cid,s.Metadata)}}return t});var Kn=f(e=>{async function*t(r,n={}){for await(let{path:o,recursive:s}of Wn(r)){let i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),s!=null&&i.set("recursive",String(s));let a=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:l({...n,arg:`${o}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins){yield*c.Pins.map(u=>h.parse(u));continue}yield h.parse(c)}}}return t});var zd=e=>{let t=Kn(e);return f(()=>{async function r(n,o={}){return rt(t([{path:n,...o}],o))}return r})(e)};var Xn=({Name:e,Status:t,Cid:r})=>({cid:h.parse(r),name:e,status:t}),$d=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},jd=e=>{if(h.asCID(e))return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},ar=({service:e,cid:t,name:r,status:n,all:o})=>{let s=l({service:$d(e),name:r,force:o?!0:void 0});if(t)for(let i of t)s.append("cid",jd(i));if(n)for(let i of n)s.append("status",i);return s},Md=({cid:e,service:t,background:r,name:n,origins:o})=>{let s=l({arg:jd(e),service:$d(t),name:n,background:r?!0:void 0});if(o)for(let i of o)s.append("origin",i.toString());return s};function Vd(e){async function t(r,{timeout:n,signal:o,headers:s,...i}){let a=await e.post("pin/remote/add",{timeout:n,signal:o,headers:s,searchParams:Md({cid:r,...i})});return Xn(await a.json())}return t}function qd(e){async function*t({timeout:r,signal:n,headers:o,...s}){let i=await e.post("pin/remote/ls",{timeout:r,signal:n,headers:o,searchParams:ar(s)});for await(let a of i.ndjson())yield Xn(a)}return t}function Hd(e){async function t({timeout:r,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:ar({...s,all:!1})})}return t}function Gd(e){async function t({timeout:r,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:ar({...s,all:!0})})}return t}function Wd(e){let t=String(e);if(t==="undefined")throw Error("endpoint is required");return t[t.length-1]==="/"?t.slice(0,-1):t}function Jd(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:fx(e.Stat)}}}function fx(e){switch(e.Status){case"valid":{let{Pinning:t,Pinned:r,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function Kd(e){async function t(r,n){let{endpoint:o,key:s,headers:i,timeout:a,signal:c}=n;await e.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:l({arg:[r,Wd(o),s]}),headers:i})}return t}function Xd(e){async function t(r={}){let{stat:n,headers:o,timeout:s,signal:i}=r,a=await e.post("pin/remote/service/ls",{timeout:s,signal:i,headers:o,searchParams:n===!0?l({stat:n}):void 0}),{RemoteServices:c}=await a.json();return c.map(Jd)}return t}function Qd(e){async function t(r,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:l({arg:r})})}return t}function Zd(e){let t=new ft(e);return{add:Kd(t),ls:Xd(t),rm:Qd(t)}}function Yd(e){let t=new ft(e);return{add:Vd(t),ls:qd(t),rm:Hd(t),rmAll:Gd(t),service:Zd(e)}}function eh(e){return{addAll:Jn(e),add:Od(e),ls:Fd(e),rmAll:Kn(e),rm:zd(e),remote:Yd(e)}}var th=e=>Array.isArray(e)?e.map(Qn):e,Qn=e=>T(cr(e)),cr=e=>ct.decode(e),rh=e=>BigInt(`0x${T(ct.decode(e),"base16")}`),ur=e=>ct.encode(re(e));var nh=f(e=>{async function t(r={}){let{Strings:n}=await(await e.post("pubsub/ls",{signal:r.signal,searchParams:l(r),headers:r.headers})).json();return th(n)||[]}return t});var oh=f(e=>{async function t(r,n={}){let o=await e.post("pubsub/peers",{signal:n.signal,searchParams:l({arg:ur(r),...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return t});var sh=f(e=>{async function t(r,n,o={}){let s=l({arg:ur(r),...o}),i=new AbortController,a=te(i.signal,o.signal);await(await e.post("pubsub/pub",{signal:a,searchParams:s,...await ee([n],i,o.headers)})).text()}return t});var lx=vn("js-kubo-rpc-client:pubsub:subscribe"),ih=(e,t)=>f(r=>{async function n(o,s,i={}){i.signal=t.subscribe(o,s,i.signal);let a,c,u=new Promise((m,x)=>{a=m,c=x}),d=setTimeout(()=>a(),1e3);return r.post("pubsub/sub",{signal:i.signal,searchParams:l({arg:ur(o),...i}),headers:i.headers}).catch(m=>{t.unsubscribe(o,s),c(m)}).then(m=>{clearTimeout(d),m&&(px(m,{onMessage:x=>{if(s){if(typeof s=="function"){s(x);return}typeof s.handleEvent=="function"&&s.handleEvent(x)}},onEnd:()=>t.unsubscribe(o,s),onError:i.onError}),a())}),u}return n})(e);async function px(e,{onMessage:t,onEnd:r,onError:n}){n=n||lx;try{for await(let o of e.ndjson())try{if(!o.from)continue;o.from!=null&&o.seqno!=null?t({type:"signed",from:Y(o.from),data:cr(o.data),sequenceNumber:rh(o.seqno),topic:Qn(o.topicIDs[0]),key:cr(o.key??"u"),signature:cr(o.signature??"u")}):t({type:"unsigned",data:cr(o.data),topic:Qn(o.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,o)}}catch(o){dx(o)||n(o,!0)}finally{r()}}var dx=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};var ah=(e,t)=>{async function r(n,o){t.unsubscribe(n,o)}return r};var Zn=class{constructor(){this._subs=new Map}subscribe(t,r,n){let o=this._subs.get(t)||[];if(o.find(i=>i.handler===r))throw new Error(`Already subscribed to ${t} with this handler`);let s=new AbortController;return this._subs.set(t,[{handler:r,controller:s}].concat(o)),n&&n.addEventListener("abort",()=>this.unsubscribe(t,r)),s.signal}unsubscribe(t,r){let n=this._subs.get(t)||[],o;r?(this._subs.set(t,n.filter(s=>s.handler!==r)),o=n.filter(s=>s.handler===r)):(this._subs.set(t,[]),o=n),(this._subs.get(t)||[]).length||this._subs.delete(t),o.forEach(s=>s.controller.abort())}};function ch(e){let t=new Zn;return{ls:nh(e),peers:oh(e),publish:sh(e),subscribe:ih(e,t),unsubscribe:ah(e,t)}}var uh=f(e=>{async function*t(r={}){yield*(await e.post("refs/local",{signal:r.signal,transform:I,searchParams:l(r),headers:r.headers})).ndjson()}return t});var fh=f((e,t)=>Object.assign(async function*(n,o={}){let s=Array.isArray(n)?n:[n];yield*(await e.post("refs",{signal:o.signal,searchParams:l({arg:s.map(a=>`${a instanceof Uint8Array?h.decode(a):a}`),...o}),headers:o.headers,transform:I})).ndjson()},{local:uh(t)}));var lh=f(e=>{async function*t(r={}){yield*(await e.post("repo/gc",{signal:r.signal,searchParams:l(r),headers:r.headers,transform:o=>({err:o.Error?new Error(o.Error):null,cid:(o.Key||{})["/"]?h.parse(o.Key["/"]):null})})).ndjson()}return t});var Yn=f(e=>{async function t(r={}){let o=await(await e.post("repo/stat",{signal:r.signal,searchParams:l(r),headers:r.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}return t});var ph=f(e=>{async function t(r={}){return(await(await e.post("repo/version",{signal:r.signal,searchParams:l(r),headers:r.headers})).json()).Version}return t});function dh(e){return{gc:lh(e),stat:Yn(e),version:ph(e)}}var hh=f(e=>{async function*t(r={}){yield*(await e.post("stats/bw",{signal:r.signal,searchParams:l(r),headers:r.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}return t});function mh(e){return{bitswap:Ln(e),repo:Yn(e),bw:hh(e)}}var gh=f(e=>{async function t(r={}){let n=await e.post("swarm/addrs",{signal:r.signal,searchParams:l(r),headers:r.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(s=>({id:Y(s),addrs:(o[s]||[]).map(i=>X(i))}))}return t});var yh=f(e=>{async function t(r,n={}){let o=await e.post("swarm/connect",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return t});var wh=f(e=>{async function t(r,n={}){let o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s||[]}return t});var bh=f(e=>{async function t(r={}){let n=await e.post("swarm/addrs/local",{signal:r.signal,searchParams:l(r),headers:r.headers}),{Strings:o}=await n.json();return(o||[]).map(s=>X(s))}return t});var xh=f(e=>{async function t(r={}){let n=await e.post("swarm/peers",{signal:r.signal,searchParams:l(r),headers:r.headers}),{Peers:o}=await n.json();return(o||[]).map(s=>({addr:X(s.Addr),peer:Y(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound"}))}return t});function Sh(e){return{addrs:gh(e),connect:yh(e),disconnect:wh(e),localAddrs:bh(e),peers:xh(e)}}var eo=f(e=>{async function*t(r,n={}){let o=new AbortController,s=te(o.signal,n.signal),{headers:i,body:a,total:c,parts:u}=await ee(r,o,n.headers),[d,m]=typeof n.progress=="function"?hx(c,u,n.progress):[void 0,void 0],x=await e.post("add",{searchParams:l({"stream-channels":!0,...n,progress:Boolean(d)}),onUploadProgress:m,signal:s,headers:i,body:a});for await(let S of x.ndjson())S=I(S),S.hash!==void 0?yield gx(S):d&&d(S.bytes||0,S.name)}return t}),hx=(e,t,r)=>t?[void 0,mx(e,t,r)]:[r,void 0],mx=(e,t,r)=>{let n=0,o=t.length;return({loaded:s,total:i})=>{let a=Math.floor(s/i*e);for(;n<o;){let{start:c,end:u,name:d}=t[n];if(a<u){r(a-c,d);break}else r(u-c,d),n+=1}}};function gx({name:e,hash:t,size:r,mode:n,mtime:o,mtimeNsecs:s}){let i={path:e,cid:h.parse(t),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:s||0}),i}var Eh=R(ue(),1);function Fi(e){return typeof e.stream=="function"?Te(e.stream()):Te(new Response(e).body)}async function*to(e){yield e}async function vh(e){if(Ae(e))return to(zi(e));if(typeof e=="string"||e instanceof String)return to(zi(e.toString()));if(Ye(e))return Fi(e);if(et(e)&&(e=Te(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let t=Ze(e),{value:r,done:n}=await t.peek();if(n)return to(new Uint8Array(0));if(t.push(r),Number.isInteger(r))return to(Uint8Array.from(await jr(t)));if(Ae(r)||typeof r=="string"||r instanceof String)return nr(t,zi)}throw(0,Eh.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function zi(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):re(e.toString())}var no=R(ue(),1);async function*Th(e,t){if(e==null)throw(0,no.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield ro(e.toString(),t);return}if(Ae(e)||Ye(e)){yield ro(e,t);return}if(et(e)&&(e=Te(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=Ze(e),{value:n,done:o}=await r.peek();if(o){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||Ae(n)||typeof n=="string"||n instanceof String){yield ro(r,t);return}throw(0,no.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(Mr(e)){yield ro(e,t);return}throw(0,no.default)(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function ro(e,t){let{path:r,mode:n,mtime:o,content:s}=e,i={path:r||"",mode:Vn(n),mtime:qn(o)};return s?i.content=await t(s):r||(i.content=await t(e)),i}function Ah(e){return Th(e,vh)}function Ph(e){let t=eo(e);return f(()=>{async function r(n,o={}){let s=Ah(n),i=t(s,o);return await rt(i)}return r})(e)}var Ch=f(e=>{async function*t(r,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:l({arg:r.toString(),...n}),headers:n.headers})).iterator()}return t});var Ih=f(e=>async(r={})=>(await e.post("commands",{signal:r.signal,searchParams:l(r),headers:r.headers})).json());var Uh=f(e=>async(r,n={})=>(await(await e.post("dns",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers})).json()).Path);var kh=f(e=>()=>{let t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}});var Bh=f(e=>{async function*t(r,n={}){let o={arg:`${r instanceof Uint8Array?h.decode(r):r}`,...n};o.compressionLevel&&(o["compression-level"]=o.compressionLevel,delete o.compressionLevel),yield*(await e.post("get",{signal:n.signal,searchParams:l(o),headers:n.headers})).iterator()}return t});var oo=f(e=>{async function t(r={}){let o=await(await e.post("id",{signal:r.signal,searchParams:l({arg:r.peerId?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...I(o)};return s.id=Y(s.id),s.addresses&&(s.addresses=s.addresses.map(i=>X(i))),s}return t});var Nh=e=>{let t=oo(e);async function r(n={}){let o=await t(n);return Boolean(o&&o.addresses&&o.addresses.length)}return r};var Dh=f((e,t)=>{async function*r(n,o={}){let s=`${n instanceof Uint8Array?h.decode(n):n}`;async function i(c){let u=c.Hash;if(u.includes("/")){let m=u.startsWith("/ipfs/")?u:`/ipfs/${u}`;u=(await Gn(t)(m)).cid}else u=h.parse(u);let d={name:c.Name,path:s+(c.Name?`/${c.Name}`:""),size:c.Size,cid:u,type:yx(c)};return c.Mode&&(d.mode=parseInt(c.Mode,8)),c.Mtime!==void 0&&c.Mtime!==null&&(d.mtime={secs:c.Mtime},c.MtimeNsecs!==void 0&&c.MtimeNsecs!==null&&(d.mtime.nsecs=c.MtimeNsecs)),d}let a=await e.post("ls",{signal:o.signal,searchParams:l({arg:s,...o}),headers:o.headers});for await(let c of a.ndjson()){if(c=c.Objects,!c)throw new Error("expected .Objects in results");if(c=c[0],!c)throw new Error("expected one array in results.Objects");let u=c.Links;if(!Array.isArray(u))throw new Error("expected one array in results.Objects[0].Links");if(!u.length){yield i(c);return}yield*u.map(i)}}return r});function yx(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}var _h=f(e=>{async function t(r={}){let n=await e.post("dns",{signal:r.signal,searchParams:l(r),headers:r.headers});return I(await n.json())}return t});var Rh=f(e=>{async function*t(r,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:l({arg:`${r}`,...n}),headers:n.headers,transform:I})).ndjson()}return t});var Oh=f(e=>{async function t(r,n={}){let o=await e.post("resolve",{signal:n.signal,searchParams:l({arg:r,...n}),headers:n.headers}),{Path:s}=await o.json();return s}return t});var Lh=R(ue(),1),Fh=f(e=>async(r={})=>{throw(0,Lh.default)(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")});var zh=f(e=>{async function t(r={}){await(await e.post("shutdown",{signal:r.signal,searchParams:l(r),headers:r.headers})).text()}return t});var $h=f(e=>{async function t(r={}){let n=await e.post("version",{signal:r.signal,searchParams:l(r),headers:r.headers});return{...I(await n.json()),"ipfs-http-client":"1.0.0"}}return t});var qh=R(jh(),1),Hh=R(Vh(),1);function Sx(e={}){let t={name:mt.name,code:mt.code,encode:u=>u,decode:u=>u},r=Object.values(Ee);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach(u=>r.push(u));let n=new Kr({bases:r,loadBase:e.ipld&&e.ipld.loadBase}),o=Object.values(_c);[wo,pn,Fo,zo,t].concat(e.ipld&&e.ipld.codecs||[]).forEach(u=>o.push(u));let s=new Xr({codecs:o,loadCodec:e.ipld&&e.ipld.loadCodec}),i=Object.values(Dc);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach(u=>i.push(u));let a=new Qr({hashers:i,loadHasher:e.ipld&&e.ipld.loadHasher});return{add:Ph(e),addAll:eo(e),bitswap:il(e),block:mp(e),bootstrap:bp(e),cat:Ch(e),commands:Ih(e),config:Pp(e),dag:Np(s,e),dht:zp(e),diag:Vp(e),dns:Uh(e),files:nd(e),get:Bh(e),getEndpointConfig:kh(e),id:oo(e),isOnline:Nh(e),key:ld(e),log:md(e),ls:Dh(e),mount:_h(e),name:Ed(e),object:_d(s,e),pin:eh(e),ping:Rh(e),pubsub:ch(e),refs:fh(e),repo:dh(e),resolve:Oh(e),start:Fh(e),stats:mh(e),stop:zh(e),swarm:Sh(e),version:$h(e),bases:n,codecs:s,hashers:a}}var Ex=qh.default;return Qh(vx);})();
return KuboRpcClient}));
